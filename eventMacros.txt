#              .:ri                                                                                                                                    
#        .iJbRBM5LBK                                                              rsujjjs7:                                                            
#   rEBBBBBK7.    uB                                                           MBBXL7r7s5dBB iQBBPr                                                    
#  BB5:        .75BB                                                         :BqIB         BBBSBJIBBBBU:                                               
# KBB    :LEBBBBBBBv                                                         BB Eq         :BuB.    .LMBB1                                             
# MLBj   BBBBBb7.                                                            B: Bi          BB          BB                                             
# .MSB   BQ                                                                 .B  B     :B         r      BL                                             
#  B7B   qBuqZDBB                                                           SB :B     BBQ       BB.    iB                                              
#  giB:   :.    BL                                                          BP DB     B7B      BBB     BB                                              
#  JUgD    .iJPQBg                                                          B. B1    7B BQ    BBBB     B5                                              
#  .BiB   BBBBBBQ        11LXr    :.    :r7rirq     ..  .rLI  .2v7ri:..     B  B     BB. B. .BBBBv    rB      LLYdE        i77vYi   11riii:    r7i7J   
#   B B.  7B        ..   br .B.  bsr2.LBi:ivIBB   Ms77D7B. PL QB    ::ir7L :B :B     BrBBBBBBBr B     BB     M:.  BR     YZr.  IB:  B uBBr7X .BL Y..M. 
#   B:Bb   B. :UBBBBBBB  iJ  B: ji  BLuB JBDI:   sB:  .BP: :g MBBBE      K IZ DR    YB   :sJ B PM     BL    7L.BS  B7   jd  :SBBB  :d BMIP R QM sBB: B 
#   bZrB   QBBMX7:   .B   b  Bs:.  BM .B .s :i   r2j   :Bj  B    dB  ZBBBS B7 BX    BS      Bi B     2B     R  i   iB   B .d.5:    u7 SJ. LB B. j .B 1.
#   .B B           :LDBY  D  QB   Bb   B: 7qQU   .gS LQ dB  Q    rs  K     BBBBBBB2iB      :B bD     BQ    .g  XBi  XB  B .Dg      Z     BB. B. :r B. r
#    B:UB    :LZBBBBBBB:  b. .   BZ    g5 Bj::r7  bg  Bi b  X.  .U7  X      rqBBBBBBs      BBBBBIr. :B     P: MB B   BB JK  buirD. Q  B  B   Ru  :Li .:
#    sB BBBBBBBBBBBBM2r   ji    BD     XB  ..:rBU JR  iq.   1r  r1  7i           :r        7MBBBBBBBBP    .M  bB bBL1LB: LI:   .BB:d  BB  v  U1L    .d 
#     BBBBBBBBbL:         .B::7BZ      :BM1gBBBB: YBMJBDBBBBB.  BBuiK                          LBBBBr     rB1YqB  J7.      i2EQBB2rM iBug.BL  URBBDEb  
#      XJ:                 r77DX        SBDs:      BBQL LujL.   .SBQ                                       .Ui.                    S2bq bBY     :L7    
#
#
#
#
#
#
#
#
#
#                                  .ri                                                                                                                
#                             iZBBBBBBBBQ                                                                                                              
#                            5BXr.    :BBb                                                                                                             
#                            B         YBBi                                                                                                            
#                           EB  :BBq    MBB.                                                                                                           
#                           Bi  BBBB.    BBB                                                                                                           
#                          rB  .BBBB      BBQ                                                                                                          
#                          Bg             :BBL                                                                                                         
#                         .B       :2      2BB.                                                                                                        
#                         MB    XBBBBB      BBB     .....      .i:.         ..:.           ..     ::.           ..:        ..::                        
#                         B:   2BBBJbB.      BBB   5ii...:s7   B:7jJ72  7sJr:::B.   :7L7 u27b7   vQ:iLj:   r:::7:.2s .riii::rrBJ                       
#                        uB    vBB   BD      .BBB  q  Iur: rJ :Z BBBi 5rB  udQBB  .Bq..jBB7 .B   M  2:.J2 YBuIi YBBL :B .rUE  UB                       
#                        B7    iBBv  EB  iUMBRsDBM s  BBrP  B si BJ7. B:B .BL:    iIu   gQU  B   b KBLs ji MEMB Lg    qBBBBb rBB                       
#                       qB      BBQ  .BBBBbr   1BB 7  .r   gB E  :. .BK B7 :.rB    5q  . MB  Q. j: BB Q1 B    B. b       .i 2Bu                        
#                       BY    7BBBB   ZB.  :bBEi   J.    rLg. R    :B7  qP 7QSv    XQ  B. B. 2i Q 5B. bi B    25 5r     :Y gB1 .                       
#                      .Bi.UBBb :BB    :BBBb:      L: .Bj.   .D .B. 7   LB :U.:7U7 vB. 1R    .r:r BB i: BB    UB  Xr5  rs LBr  db                      
#                       LBBB.  Lbv                 rU  Br    LU :BB  M  :B:  :vbBB iMr .RY  :PjKi     .BB  .B:     :B: B     vBBB                      
#                         :MBBMr                    BU7B7    7B:QE:BBB.  MBBBBBRu  .BBBBKgBBBB  PLrrIBBM   .BBQBBBBB1  7MBBBBb:                        
#                                                    .        :i7. ir     i.        ::.           ....      .7:.        .7.              
#                                                    
#                                                    
#                                                    
#                                                    
#                                                    
#                                                                 .:irvLsJjjsL7ri:.                               
#                                                        .:i7J15bbbPqXS5II55XqbdEZEbIL:.                                                               
#                                                    .r2bbbqX51uY77777777777777777vYUXdES7.                                                            
#                                                  :2Zb2L777r7JY7rrrrrrrrrrrrrrr7777777LUbg5:                                                          
#                                               .Ig2v777rrrsULrrrrrrrrrrrrrrrrrrrrrrr77YsvUgb:                                                        
#                                               :M2ivY7rrr7Ijrirrrrrrrr77rrrrrrrrrrrrrrrrY5Yr1R2                                                       
#                                              rM7:vUrrrrsS7irrrrrrrrr77rrr77r7JY7rrL7rrri7SUr7bM.                                                     
#                                             iMr:7Siiiis5rirr77rrrr7Y7rrr7Lrr7PqUir727rrrirSIii1B.                                                    
#                                            .M7iiS7:iiLSi:irrrrrrr71vrrrrjLrrvbKbLiis5rrrriiX2iiJB.                                                   
#                                            K1rrsUiii7Xr:iiiiiiiirI7irrrs1rriJMXPErii2siiii:ibJii5E                                                   
#                                           :Zr7r57r7rIYirrrrrrriiIv:iii7Srii:ju7L5u::rKrirriiYb7rrgr                                                  
#                                           Y2r7LUi7rL2r777777777UJirrr7Sjiri7u::::57iiIur77rrr52rvuZ                                                  
#                                           SLvsULr771LL77777777ujrrrr715rrrr27....v2riY5rr7rriLq77UD:                                                 
#                                           q7YUUrrvL1vJr7r777rYUrrrrrYS7r7rvI......S7r7S7rrrrrrSLi2E7                                                 
#                                           brJXLirLussv77r77r7U7ir77LSLir7r2r .... ssrr5v7r7rrrUji2Zu                                                 
#                                          .Pi1Xrr7JjJS7s777772J7LLYub577r7jL ..... 7bLYbuL7777ruui5B1                                                 
#                                          .qrKuir7jYKb7j777ruI77r7LK2irvj1Y  ......:X7LPUu7r77rujrUgX                                                 
#                                          .K7P7r77sYZSjjrr7LI7ir7s1UiiL5bv  ......  s7uLYuLr77r2Y7u:I                                                 
#                                           KLIrr7vLYqIqurr7KJii7Y7s7r7:ur  .......  75qr1XJrr7717q:                                                   
#                                           X1sr7rvLv7SZj77qbi7DBBBBBBbr.  ........:EBBBBMBU77L515s                                                    
#                                           SK7r7rLvLijPJvSZJuBB vBBBBBRi .........:2BBBM M57LPPZ7                                                     
#                                           Uq7v7rJvJr7ss55UjbB  .BQQQBL ..........  BBBQ jXj5B:                                                       
#                                           YUYvrrjvjrrr7Lr77sR MBBQMMBu ......... IBBQBQ 7SdXM:                                                       
#                                           Uj17rru7u7rrriiivrd.QBMBRZBu ......... dBBBQg .Sb5Mr                                                       
#                                           IIjiri17j7rr7rrrJi::XBqMZSBv ......... UBXKgE  KKIML                                                       
#                                           YdYiri17j7r7r7r7ur  LBSU1KB: ......... 7BDEB5  sbSMY                                                       
#                                           .Buiri17j777rrr7U7   MBBBBM  .........  LuLi   :bXRL                                                       
#                                            7Eirij7sY77rrr727          ..........       . :qSRr                                                       
#                                             DviiLY717vrrr72Y         ............   ...  YKSQ.                                                       
#                                             :bii727qvJirrrUJ  ........................ .1bIbD                                                        
#                                              b1i7ULPIj7irrjI:............:....:.... .r1Db2ZBL                                                        
#                                          :YUJuBX1UU5PSsiiiLbujYi:..   ....::::....rS7IBISdrD                                                         
#                                        .XbK17:sMQBMMDRQIri72::22UU1J7i::....::::sUgB iZPX                                                            
#                                       rDI2YriYs2XIUuUKEuLJ7ui   :rL5bMQBRZ27r. :L:.siLK:                                                             
#                                      :gJIriisRQE51USv.   :75U::     .........:r7L. :X5                                                               
#                                      PUKrirrPBbbbDM.        :.:r:ii::::::iirrri:7: .7jJ                                                              
#                                     .dRJiriJQbSS1b.  .:...     :bY.  ....:::::..s:  7rIS                                                             
#                                     iBbrrr7dQIbsU7 :Xq7iirri.   :b:   ......::rEB. .7::u5                                                            
#                                     2ILrrrIQbqSLS. 7J: ....:77:  bB2Lrir7vYjUYIBB. :7. .JS                                                           
#                                      :IrrJERIdsjS .:i  ......:7i iBBBBbLi:::..qBB. 7:....LK                                                          
#                                      UL7sXRXPqjSb .:r..........:i.BMqbgdu:. .SQBE..7......7b.                                                        
#                                     EMUUKdDIZXqEB  :r.......... ..5RDXqdMQb72QgQ7:i........:bi                                                       
#                                     :  vRR5bbIIdBi .:i..........  .rSQdXqEBBMDDd:5i..........Ss                                                      
#                                        BBDSZjYjEKK   :i..........   .YMQDQgdZbMj77Lv..........Lq.                                                    
#                                         .bDXvLqquEL   :r:.........   .rRBbbdbbRBP  7v. ........:b.                                                   
#                                         JMDXIUbu1XDr   .7r..........   7BBDEdMBBB:..Uq:........ vL                                                   
#                                        iBMujKZSY12qBu  .:rr:.........   :bBQBMujqDDBMBS........ Lr                                                   
#                                        RBqLsIEXUu2dMBL    .7i.........         :rv1uIM: ........I.                                                   
#                                       IBMJYjbISKXKbgBY:7JIqMBj. ........           Y7:   .......I                                                    
#                                      :BQXLsKqL2KISPbqBBBBBQMRBZ: ..............  ..7I777i:. .. 7L                                                    
#                                      KBgsYuEjYJS5qP55KQEPPqbdMBBU............. :EBUriKRQquUv: .1d7                                                   
#                                      BBEjYb5Yjs2qPPKQdRRgMMgZqXMd7:...........UBBdrr7IgqMdEBK7iL7PU                                                  
#                                      .qBQDDJssYUXbBB7rri:..   .   i7i:.......7D5XSivZqMZ2RZ27L5i:iqL                                                 
#                                        .uMBRdS2KXRL.        .:  .irvYYsYssssuur7YJJJjLiv5KXrJXE7.:ib:                                                
#                                           :1DBBMB.   ....ii:.  .J5r.  ....::U5sr7JjvLjJ7Luv1bEgU:::rb                                                
#                                               ..i:      :. ..  .E7  ....   :sjrrLLriLLLJ27:udSQR::::Y1                                               
#                                                 :QL::...:  . . .L  ....:i .SIr7sY7rLs7irJbJ:LSZs:::::Xi                                              
#                                               qBBQBMEEMB.  ... .7:......Y. KLrJJ7rLsLrrLL7bvvZQ:.:::::P                                              
#                                              BBDEdgQBBQb.  ...  :r......7: Lrr77r7JY7rLJ77d2uZBU.:::::Ls                                             
#                                             1BSXSXXqQK7b. ..... .7:.....7:.PJv7iir7rr7JvijE27iBB:.:::::K.                                            
#                                             BES55SIqb75Bi  ....  :7....:ri LbbX1J7rrrrrrJEbDd5EBj.::::.:5                                            
#                                            7BKSSSIX5SSSbS  ....   :7:..::7  .:LXbPXSuLs25BI77qgBq.::...7BK                                           
#                                            UBXSSSPMKXPJgQ. .....   :7ri::L.    .:i7j551i.5. :bDS. .:rUQBBB                                           
#                                             5MbbRbUsKsSMS1  .....   .i777J: .        ....7:1RdgUYPQBBBBMRB2                                          
#                                             .ZjqMu7sIYEBbEr  .....    .:vq7 ....     .:. rQBBBBBBBBBQgEbDBB.                                         
#                                     .isbQQBEZSbS157Xu2EJdQBr  ...::.    .:U.         .::7RBI7BBRRMgDEEddEMBB                                         
#                                   7BBBBUi.  LDsUjbJSsPE5uXQBL    .::..    XBBMdPqXXKbMBBBB2  dBgZZZDZEEZDgQB2                                        
#                                   .LIZMMDPKdQM7UXEPX1EuJXXdMZb:   .::::...:BBBBBBBBBBBBBMQE  .BMDZDZbbbdDMBBB.                                       
#                                        .iJ7  IX7ssL5PKv7vuUu1KMP:  ...::::.dQbbdddbbPqqgZMB.  MBgMMgMDEbPbMBBB                                       
#                                               Q2v777LLvvv77LsUbBBMUi. .... 7RKXKKKKKXXSZMRBI  iBBRs:        iDI                                      
#                                               .RdjYLvLJjju12SqPPEQBBMPU7i:.7MKKKKKKKKqbMBBBB.  BL            .d:                                     
#                                                 jRd51ISS5555I2I5XqbMBBBBBBBBBbqKKKKKZMd5sLUgB. r     :7LLvr: iiU                                     
#                                                   YZMbIUUU1uuju2SPDQBM5XSs: 5MMPKXbgY.       :rS. rgBBBBBBBBBL Y7                                    
#                                                     :LqddbqbPdDMQDS7.       . PBMMK            .:MBBBBQQBBBR7  .K                                    
#                                                         .ivuuY7:.          .:  :gb      :YPgRRMES2L5ddq2Li      Y7                                   
#                                                                            .L         iBBBBBBBQBBd     .:::i:.  J1                                   
#                                                                             I     .:.sBBBBQQQQQR5   rdSXKbdgQQbJBi                                   
#                                                                             i2      ..:rLJjYri:.    .bMIU2ISXbQB5                                    
#                                                                              7Di             :71bMRgXUBgdPbEQBMi                                     
#                                                                               :QBs        :qEPXXXKKKbbBBBBBMU:                                       
#                                                                                 .MBY.    SB5YIIUUU12bZ                                               
#                                                                                   iBBMYiqMSUU11112qQd                                                
#                                                                                     :PBBBQRMgDMMQRPi                                                 
#                                                                                         ..::::::.
#
#
#
#
#              .rL5RBBD:                                                                                                                               
#            QBBBBdu:5BB1                                                                                                                              
#           dB        dBB.                                                                                                                             
#           B    i:    BBB                                                                                                                             
#          UB  7BBB.    BBB                                                                                                                            
#          Bu  BBEBS    .BBb                                                                                                                           
#         :B   dgv.      7BBi                                                                                                                          
#         BB              gBB                                                                                                                          
#         B.    .JBBR      BBB                                                                                                                         
#        qB   .BBBBBB:      BBB    i7v2.          ir:i      iY7:          ..:iris.    :rrr7: ..      ..:riis     i7r7r.  :Y7ri:.        .77Jg:         
#        Bi   .BB1  BB       BBb  .M. BQ.        X:i77Ui   :B::BB  Ksr. rM.:..:rBI   bB:  .ZBBu1Jr Ld.:..:rBv  rKrr77uB. Bi   :irr77i  :D:. IB         
#       YB     BB1  uB     .rBBBj  b  7Ks       b :BBB.X.  Q   BB vD.:B rBBBZ BBg   s2u     B   .IUvBBB5 BBd   B  BBbZB :BBBE:      B  D uB  RB        
#       BY     BBB   BSUBBBB7  BBi E. :KS      :b b  LK.X .E  bB. B  7B: . :B .Y    KiK  Bi   B  5r . iB :r    Iu  ..:     sBI  BBBB:  Q 7r   BB       
#      2B      BBB   BB1.   .2DMI. Ui  E5      ju j  qB q j7  BB Jv  BB     Mi D    2rv :BK .BB  B     Q: M     uBb: .P    .j: :j .   Ur .PB   Bj      
#      Bq  :PBBdBB.   gBijBBb:     rj  BML7LsP vB S B77 b Xi  SB7J  vB:     2B Lqi. ir  U5BBMMi :B     XM 51r. .:.:PB LB   r2  7.     Q  B55s  rBr     
#      BBBBgJ   BM     :Mj         .b        dS B .rM   L: B       5Bu    s:ir    SrgB7.E   r7  gi   j:ri  . d.M    . BB   Jr  b     u7  BU BLLYEB     
#       iBBv:bBb                    BL1bBBBBBBB dBv..rBRMR .PU7iLMBB.    :B: :JbDBB ibBB.  iBBMuR   rB. :ubMBQ MYri7ZBB   iBR.Yr     B57LBq :Xr.       
#          2X:                      .BBD27:.     :PsYi:BX    .iLJr        bBBBRS7.           rBQ     MBBBMIr.   :irr7.     SBB2       5Xr.             
#
#
#
#
#                                                                .irri.                                                                               
#                                                                 X5svXg5:                                                                             
#                                                              rBBBBQddQBBBB5                                                                          
#                                                             :RBBBMdXIJZMgBBB                                                                         
#                                                             17.1PbbZEXd1JqbQR                                                                        
#                                                             Li.:.:rvIDbqbZbEB.                                                                       
#                                                             7LjdE57IZPqZBMXL                                                                         
#                                                             :IYMgZqMPqMX.                                                                            
#                                                              i1ZMMQQZQ:  .:rrYv                                                                      
#                                                               QdUJLYjEjIqI55qM7                                                                      
#                                                             iEBQI7UJjbgB.                                                                            
#                                                          .712EMb:rEBdqjMBu71r                                                                        
#                                                         vI7LZRE:iL7bMPuLBBv:                                                                         
#                                                       7Ir.LRMZiiJY77bRPv1Bg                                                                          
#                                                     igL :jqMZ77jLLv7vgB27uBP                                                                         
#                                                    Ld. 7X5IU7uqPUXbs7Yd57LjQq                                                                        
#                                                   L2 .IKq2:7bd.SQU1IL777vLsXBX                                                                       
#                                                  :d :XSsqI.:Ur.d5 LSuSYsXJL1QBu                                                                      
#                                                  Ei.5IjYLdBBq.EBU...sEsXMqLLuRBi                                                                     
#                                                 .Z:YIJsL7uZBI:bY..LKSLLSq2Lv7PBM                                                                     
#                     :1qZbbDPL                   .KruusYLuSK1:    XEs77777vLvUZQQ.                                                                    
#                   YBb7.    :XBS                  q7sJYLXj:.  7MMiDJY12uL77LIbdgQ.                                                                    
#                  BE     .:.   RB                 sJ7sIbBL.Z::Bg2iRbZZDZEq2KEbdSE.                                                                    
#                 Bj    7u7irsK. gB                ibvKZdEBZr Lbbr:5JDZbbdEZdbbUuRP5i                                                                  
#                KZ    K7:jJri2Q  Br            .7uJSPbbPPDBiYbUv.r1IEbPPPbbPbuvPJsqQE:                                                                
#               B.   LBSs 7MYjQ  uB          :1q5Y77jdMdqdQ5MMBE:MBEKKqqPPPXjJqULYYsKRj                                                               
#               .B     v7  S5UZi  .Bv.      :2P2sYL77irUdggMMdPDRZDqKKKKqqK5UUqSJ777Ls1b2                                                              
#                B.      LXSYi.    gBBBD  :5quYYLv777riirvUqEDZgRRDZZDZZbbddPYi72q277Lu71U                                                             
#                QZ     dXrS      qZ     7quYsL7vvv7777rri::ir7LYYYsj2Pd27771gZJiru5L7J7.X7                                                            
#                .Bs    .uJY   . 7B     uSULLvvv7J27777777rriiiiiiiii:iJEbsrirJbdur7sY7..:D.                                                           
#                 .BD:  .jJXL  :SB.    SJRd77vv7rSS7Y77v77MB7ir777rrrriivEBZ27irugZJvi....rP                     jX.                                   
#                   PBMvv5SbSYbQI     I7SMr77L77vbs2u7777SdBgL777vsL7r7riiuQMXL77r2S. .:irLBP                    2B:                                   
#                     iUUJusjj:      rI7Xjri1J7UgBLbu7Y77Mi.BBD1r7L2Kj7r7j1KQELr:. 7v7js1jJBBL                ::  L  :ri                               
#                                    IL7rv7.jJIMMIJD1vU77Ri :DBBELi7SBZUKji.7Qi  .rrZBgsvv7JBBr               YPs   XDbv                               
#                                   .dJ:7Y: .7RBr.5KK7bvYBs   iXBBI: .1Q7.:i:MB:ivKBqgZX777rPBQr                   .                                   
#                                   .B7.Pq:.  iE. vY1:i:rQP.    .7bd7:i.UQsirIBBu7r5gbMEjr7r7MQBY               J. qM.                                 
#                                   Br ED7Ir .7   7Pj   u2:...:.  :BBgb5XQbYjMBSrridEMEb7r7iLBMB2            UBq   1:                                 
#                                    Qj SBIgBIbY    :DEi:YQv...YZEbBBBBBQMRBEUXQE7rrUEdEEK7vLiYBZBQr          :.                                       
#                                    rB :BPLBBBBBM5r:2BQBRBB.....:MB7    :LQBBZMRuiLLZPDPdPssjr75j2QBbs7:                                              
#                                     Rv JBLKBBbr5gBBB5:iJbBBi.. .B: rLJ.   UBRDBDr7jZXdZEdP212v7Yr::rjU7   .ir.                                       
#                                      P  BBYDB2  UB: rb7  .IU.   ..q  uBE   IBidB2isPP5DMMdbKbMdIKZqJ      KUiD.                                      
#                                         2gRbBB..B: .ir:          bB: XBBg  .Bs.BBLvJPIXdbZMMLsIuvr::      .r7:                                       
#                                         I77dBBPiB.Ki bM          ZBBDdgQB:  i. EQQSjLqSdX1PQ        .ii:.                                            
#                                         5.rL5MBEB:QE:dBv         5qRDKKDbi .   KDdgZXJqZMsLB2    :v7i:i7jL                                           
#                                        iL.s75ZbQB7jBgdBD    ..   .jiJjj72:.... US5bPRgKERQvsB:  7s       iX.                                         
#                                        X..i5MSLPQYiMgqBB.  ...     LJJ77Y7Ybb7.Uj1bqMDqISgZLUR  X         rS                                         
#                                      .br.rbBu7jbg7 L1qZP     .            .::. 2uuUXgKqDX2bMXgD75         iK                                         
#                                     iQbPBB7:j7ubZM .ULsr.:.  .              .. UjULXDXPd  :rLi.:17       :S.                                         
#                                    YBMqI:   dvjbdBr     :..  ...      .7UU7ii..S7LLMbXD: v   u   7Ivi::rjJ.                                          
#                                             L57dEQL::.                .rLYSBBKPULjEREMv   iir:     :rrri.                                            
#                                              Z15dBu  iLLr:                i7IIqPgQQRMMbBb     iv.                                                    
#                                               KbZMB.    :iUI7:.     .:vsU2L7jbL7EBXYMKiBBB   .bMv                                                    
#                                                ibBBB     rqBBBJu72DBQgBbUuYDPMb77KLiMBBBBBb:                                                         
#                                                   rgg   I2Sb5:.iMBBKbbIrrivZEggqY:iJY7JEBbXQP                                                        
#                                                        JuLP2..:ZMi.ir7rrr1b5bi iguUIU5MBqLYsQB                                                       
#                                               .7::: .  K:XS. .bds:...:::15r1.  . :bULjS:.. ..d7                                                      
#                                              rBBBBBBMBbMdBMrrKbI:::..:i2Ii5: :s. 7r:ibL7uLs:.:q.                                                     
#                                              SrSLZBBMBBIBbbBDQQgBsr1L:jK7KZirirLSSsUXJ.us.Xv.:LS                                                     
#            ....                             :7      : 7.:Q:Lb.PE7DBDBKbSr:  ...:MbL7:  7MXj:::rQr                                                    
#       .7SbXU1Ibdb:                          7:              i  L  Q rBQ.  r1JLr:2BYrs71Ir:..::.7Q                                                    
#      IMJ: .:    iB5                         1                       7B7 rbs.   ..:1d17r:..:::::.I7                                                   
#     RX    7BrL2.  BY  ..                   .u                       1Bj7gi  ..iL  .qLi:..:::::i::b                                                   
#    ug      5  7B7LMB .Br                   7i                       5BZP7. ....ii.:jg1Jr:r:.::i7:2L                                                  
#    g7     .ZP  rM .BbIr                   .2sY:                     SEDgI7i:...... :q7rSbqLi:..:v7D                                                  
#    LB   rBBBB     id                    :u7. YB5                    XIbLEIv.....:7  sX..7Y2SKUr.:vZ7                                                 
#     BD.  7si    .Ud                   .S5r:r7vLdZ7.                .PJb2bL7.....:L:.rb7..7r.u5Pv.:sP                                                 
#      IBP7...::qbP:  7                JBIrr7r7Pd7jZMX:              .bLKbbbLL:......::Ks7... s7vgYvrXr                                                
#        .:rLJDBb   sRB               I7       :bP7771Qi             :b7jJ.EsY7...   .YIYr... 1Yu5.iUbb                                                
#              i  rI7Jq              rj  .i77vLrrKZjYUZi             :K7jX.vKvv7rr7uXPUv7.....2:u5...1Bi                                               
#                YJ..7Z. r           Kj...7LrirKri1q7:               iX7rX:.5qXqbddK1v7i.....rJibs...:Eq                                               
#               7s...:SbMB:         .uii..     XS::jP...             LJ: sjrrvPBur:..:.  .:.:Z:uK7i...:P:                                              
#              :P.....:7LLSdj.      iLi:.r52IYi7Dq717:..             Ur..7Ii::.iS7i.   .:Liis7Iqr7v:...s2                                              
#             :bi..:..... .rPD:     :X:.::::UZi:iXr.                 qr..iEs7riiPRu7777j2u5KjUUri:vv:.::b                                              
#             Ii...::...r2i.iSd      uv7Rr.i1Qj771r                  br..:dYb177ibQSKPPPKSbSu7i7r.:L7i::27                                             
#             1::...:...QIE:.Lg:     .R7125XID17r:.                  K7...IrPs...7XMbbXbu77rrrr7vi.:r7r:7b                                             
#             2i.YXi.r7i7...:7gi    :uPv:7v7ivsJ1XbSYvr:..           u7.. SQDEPbqX5U22ubU..:777::i:....:ji                                             
#             i5rEXJJjir7L7irrXDL.7SjrbSr7iiiirrr7vuqBBqbddMXLr::.   LL:iibbsu22UjsssssJPK: .r77:...:7KQr                                              
#              Lv. 7u    .LM1Ss7SKJrii2Mbq2JLv777L2EQIiir77SBBBRQBBBQBBMBB2Jjj111U22I5SKPBBu:.rYJUIXbZPPMML.                                           
#               Er.5.   ..LdZEU7iiir7iiIEdKqbddbEDRRDK5UjL77jSK27rvsJdEvqKsKbbbbbbbPqqPKLLKggbPEbEbq52UIKZBBPi                                         
#              :ji7b7i:.:7Z5vi::i77rriiruSKXXSSPqK1J1qEgMgdXUu125u7i:IJrKZb51ujjJsYYsjLi:::7J5K5SI22UUU2SXqEBBB1.          :i777r:.                    
#                i7LSESYudPi.:i777rrrrii::i::::ii7vsJj1U5KPbbbKI1UI25g2YMMLJuu1uuuu1UL::iiii:ir7LLsJjjJJJJjssj5gQqi       1MB:  .PZ:                   
#                rY7rLs  ji.i77rrrrrrrriiiiiiiii::::iiii7J1uUSdEEb5uSdY5P::77LsJj11j7iirrrrriii::::iii:::::::iir75Rb:     Yi:7rirr2v                   
#                     UU:K7:r77rrrrrrrrrrrrrrrrrriiiii:::i7JusvLIqbbMK1b:.:::::iii::irrrrrrrrrrriiiiiiiiiiiiirrrr7XbD1     U  .. ::                    
#                    Lqj5d7:7rrrrrrrrrrrrrrrrrrrrrrrrrrrii:iii::LusuSZgi.irrriiiiii::r7rrrrrrrrrrrrrrrrrrrrrrrrrriJdqMZ:::i7    :X  .                  
#                    j. :rs:7rrrrrrrrrrrrrrrrrrrrrrrrrrrrriiiiiiLUjYLE7.irrrrrrrrrr7ii7rrrrrrrrrrrrrrrrrrrrrrrrrrivXbZr...       :i7v7sr  .i7rr.       
#                     .::JP:rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrri72usPj.:suu7rrrrrrr77:r7rrrrrrrrrrrrrrrrrrrrrrrrriubj   :rv7:          rjrL:..:LJ      
#                   :vjsLLg7irrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrii1JKZ.:2s :brrrrrrrr7r:rrrrrrrrrrrrrrrrrrrrrrrrri1Zi :jKIuJuXSi    .rs7.jP.:i7. :S     
#                    .:::.rgs7rrrrrrrrrrrrrrrrrrriirvYJJsL7rii7sYSbgK::sSij5rrrrrrrr7rii7rrrrrrrrrrrrrrrrrrriiirKgY LjLrrrrrrLIqqPqX511P2b.  .Ii ji    
#                          :bDEqjirrrrrrrrrrrrri7LI5uL77LJI5UPEi7bB2.2ii7Jsrrrrrrrrrr7rirrrrrrrrrrrrrrrrrr7vYJ5D7 iiU..:::iiiiiiirrrrr:1L:    :5 J:    
#                            .sgRYirrrrriirrrrJbBMi       .rSS: dj.L.jJiiiirrrrrrrrrrr7ii7rrrrrrrrrrrrrr72qKKgqv  r75i::...:::::::ii...vr.    L.i7     
#                               iKMMb55IuLriiUMES  .:::::..s.J :b  :jiK7iirrrrrrrrrrrr7rirrrrrrrrrrrirr72X2Sdu7.i:i:rIrrrrririirLJ7. :KYv..:i7i7r      
#                                  vDBgbKK5LrEXK  ::::::::Sr.j :X...rXjbYrriiru1srrrrrrrirrrrrrii7JuUIIII2Pq7.:rri.isYu777vv77vUSJr7jbZuii:ii::        
#                                    .LdMZPS5b5P .::::::vug:ir :Zi..:7IKMXU1jS. Luiiirrrrrrirrrv2KKXXSIUqPsiiii::    r7UbbX52SDDEqPbbDKMBD2K1:         
#                                       .LbMMBBg:.::::iuUUd:ii..bXiri::LqMSIXb7iIKuJL77777777L2XXI2UUuSb1i:r7v7ri:ii::77YKPS5DS7 .YLjSbBBMMEbMBb.      
#                                           :EBZ:::::71UI7Y1:7:::D7:ii7JZBBP2IdZXUSXKXXXXSSSSX52U1ujUqX7:ir77i.  .iri:::::rrKqLr .7777LJuujj1bRBB.     
#                                           :R1:.:::L2U2i:Ldv7LL:rXXMMsv77YEgDMbbb22U112222I2U11ujUKQ5::r7r:.               DKjvUuv777777JU2SPbdBZ     
#                                         :BBi .:::Lu2J:.7L1BILUJi7PMJii:::i7vYvYdd2DEXIIU111jJj2Kqs2BJir:                  gKSvvL77Lj1ujIqKKXSSBD     
#                                       .bBg. .:::Lj2Y:.iYXQbPUuPZb57ir77rrriiiiiius7ZMXUXPqKX5XXj7rrdBj:.                  MPPSJYsu111ujj5KS555Bv     
#                                      .BBd. .:::7u2j:.:7SBU7ZEDqY7iir777rrrrrrrrii27i257r7Yjbqvrr77r7BBLi:                 7BKbbbbKujjjjsJ5S5IED      
#                                     .BRZ: .::::21S:.::7MdrSjrri:::.....           Jr7LX7i:rKI777777rXBQ77i.                LQEPPKK2jJJJJ1S5KgRi      
#                                     qQPJ  :i::iYKL..::sBj7Pi:irr.                  1:vY2r..1SiiLL77r7BB5rvi                 .KMQgDDdKSqPdgMgJ.       
#                                    .BXd:  :i:::1Sj....SR77b7ir7i.                 :7.Jrbv:.YKi:sLv77rdBBr7r.                   :JS5bMMMES7.          
#                                    :BbS.. .i::.r2DI:.iRU77PJ:r7:                  I..U257..Sb::sLLv7iUBBsi7:                                         
#                                    .Rd5.. .::::.:7EQSEX.rv2Kir7.                 77.75SXUUZDr.isLLv7rSBBKi7:                                         
#                                     dDMv.. .::::...i77. rLvP7ri                  ui rLrLusi..:LsLLL77MBBPir.                                         
#                                     .BZMU:.  ...:... ..iv75Eri.                  uv ........:vJLvv7rPBQBYi:.                                         
#                                      .QBBMUi..  ....:i7sUEg7:.                   .D.  ....:iLsv77rvbBBBX::.                                          
#                                        qBBBBMPUJL7LuSEBBBS:.                      iEL...:rYuYLLJSMBBBQs.                                             
#                                         .5BBBBBBBBBBBBBb:                          :BBQZbbdqKEBBBBBMY.                                               
#                                            .i7u2I55sr:.                              rjUI5SqPPSu7:.       
#
#
#
#
#                                                                                          .:                                                          
#   ..                                                   .i7svi.                          2BBj                                 .                       
#  iBBBBBBBBBBBBBBi                                   IBBBBBBBBBBBu                     sBBBj                                 jBBBBBB                  
#   .iBBBBB  :BBBBB.                                :BBBBBL   UBBBBB.                  :b.                                      BBBBB                  
#     BBBBB   1BBBB. XIjssY2.7Sjsuu   .            .BBBBBP     MBBBBB  P2Jss7.EBMr   r2PKX1sr        7PBBBK:  7KjsYJ. uXjsYJ.   dBBBB     iIMBBQ2:     
#     BBBBBi:JBBQ1   BBBBBBB.MBBBBB .BBBM          KBBBBBi     rBBBBBj BBBBBBBZBBBY:BBBJ.KBBBBv    bBBBBBBBBB PBBBBB5 BBBBBBL   EBBBB   YBBBBBBBBBB7   
#     BBBBBBBBBBZ:    .BBBB7  LBB   iBBBB          gBBBBBi     :BBBBBE  XBBBB  BBB:rBBB7  BBBBB   bBBBB  BBBBL  BBBB7  .BBBBi   ZBBBB  7BBBB:  7BBBBr  
#     BBBBB   rBBBBb   iBBBB  BB:     ..           YBBBBBL     7BBBBBL  JBBBB   .    rjLZBBBBBB   BBBBB  dBBX   BBBB7   BBBBi   EBBBB  BBBBB    BBBBB  
#     BBBBB    BBBBB    XBBBBMBP                    BBBBBB     RBBBBB   LBBBB      jBBBB1 PBBBD K BBBBB         BBBBi   BBBB:   PBBBB  bBBBB    BBBBM  
#   ::BBBBB. :QBBBBB     BBBBBB     :BBBB            BBBBBb   5BBBBQ    dBBBB.     BBBBS  BBBBBYB  BBBB1  PBBi  BBBBQ  gBBBB1   QBBBB   BBBBb  IBBBB   
#  :BBBBBBBBBBBBBPr       BBBB.     :BBBB             .bBBBBBBBBBX.   .BBBBBBBB    JBBBBBBsRBBBBB   PBBBBBBBv   LBBBBBBJBBBBBBvBBBBBBBi  YBBBBBBBBv    
#                   .BBB5 .BB1        ..                  .:i:                        ..     ..        :i.         ..                       .:.        
#                   vBBBY MBb                                                                                                                          
#                    7BBBBB:                                                                                                                           
#                                                                                                                                                      
#                                                                                                                                                      
#                                                                       rUPu:                                                                          
#                                                                     1BBBBBBB                                                                         
#                                                                     BBBu  BB7                                                                        
#                                                                     IBBBvBBB                                                                         
#                                                                     rBBBBB: XBBBBBB                                                                  
#                                                                  .BBBBBBBB: :dBBBBq                                                                  
#                                                                  BBBB  BBBBZ .BB                                                                     
#                                                                 :BBBB   bBBBBBB  .BB.                                                                
#                                                                  BBBBB.  BBBBBQ.:BBB                                                                 
#                                                                   5BBBBBBBDsBBBBBBB                                                                  
#                                                                      ...      ..                                                                     
#                                                                                                                                                      
#                                                                                                                                                      
#                                                                                                                                                      
#                                                                                                                                                      
#       7vrriiii   :Y7rrr7.  :ZE:                                       LLrrir.                                                                        
#       BBBBBBBBB  IBBBBBBb  BBBB                                       BBBBBBB                                                                        
#         BBBBBBBE   :BBb    iMM7                                         BBBBP                                                                        
#         RBBbBBBB2   BBJ  vM777v7  BBDEE1 ZBBBE:     sQBBBBBJ     .EBBBU BBBBS    :XBBBBBs   uBMDZZ:iBBBBb rBBBBM.     7DBBBBB5.    :bBBBBBZKB7       
#         QBB XBBBBY  BBS  YBBBBBB  BBBBBBBBBBBBBu  SBBBB5SBBBBb  iBBBBBQBBBBB5   BBBBMrqBBB: JBBBBBBBBBBBBBBBBBBBB   rBBBBEUBBBBB  DBBBBv:7BBBP       
#         QBB  BBBBB: BBP    BBBBZ   iBBBB:  BBBBB iBBBB:  .BBBBu BBBBB   BBBBI  gBBBB   BBBB   BBBBb  ZBBBB  :BBBB: .BBBB5   BBBBB BBBBB1.   .        
#         QBB   BBBBBYBBq    BBBBb   iBBBB   KBBBB KBBBB    BBBBB BBBBD   BBBBI  BBBBBBBBBBBB.  BBBB7  XBBBB  .BBBB. LBBBBr   BBBBB  PBBBBBBBRv        
#         MBB    BBBBBBBP    BBBBK   iBBBB   gBBBB rBBBB.   BBBBq BBBBB   BBBBu  QBBBB     .r   BBBBL  5BBBB  .BBBB  .BBBBu   BBBBB     :SBBBBBB       
#       77BBB1r   BBBBBBD  .iBBBBB:  iBBBBB:7BBBBb  MBBBB  bBBBB  1BBBB2.QBBBBB.  BBBB7  .BBB  rBBBBB  BBBBB. SBBBB2  jBBBB. 7BBBB. BBB.   BBBBB       
#       BBBBBBB    BBBBBb  bBBBBBBB. iBBBBjBBBBB7    :ZBBBBBBb:    7BBBBB7IBBBBB.  7BBBBBBBj  qBBBBBB52BBBBBB:BBBBBBR   XBBBBBBgr   BBZBBBBBBBU        
#                                    :BBBB                                                                                                             
#                                   iDBBBBL                                                                                                            
#                                   BBBBBBBB     
#
#
#
#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte I]															#	
#  									- Falando com Sprakki fora do Castelo & Fazendo as alterações necessárias -						#
#																																	#
#####################################################################################################################################

automacro moveToSprakkiOutside {
	exclusive 1
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	BaseLevel = 1
	NpcNotNear /Sprakki/
	QuestInactive 7117
	call {
		do move 52 113
	}
}

automacro TalkSprakkiOutside {
	exclusive 1
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	BaseLevel = 1
	NpcNear /Sprakki/
	QuestInactive 7117
	call {
		[
        do conf -f in_saveMap_sequence false
        do conf -f membroDoEden none
        do conf -f quest_atual none
        do conf -f saveMap_storage_sequence none
        do conf -f saveMap_wanted none
        do conf -f saveMap_kafra_position none
        do conf -f saveMap_sellNpc_position none
		do conf autoMoveOnDeath 1
		do conf autoMoveOnDeath_x none
		do conf autoMoveOnDeath_y none
		do conf autoMoveOnDeath_map none
		do conf saveMap none
		do conf saveMap_warpToBuyOrSell 0
		do conf sellAuto 0
		do conf storageAuto 0
		do conf storageAuto_npc none
		do conf getAuto_0 none
		do conf autoTalkCont 1
		do conf sitAuto_idle 0
		do conf sitAuto_hp_lower 40
		do conf sitAuto_hp_upper 80
		do conf itemsTakeAuto 2
		do conf itemsGatherAuto 2
		do conf lockMap none
		do conf attackAuto_inLockOnly 1
		do conf route_randomWalk 0
		do conf statsAddAuto 1
		do conf statsAddAuto_list 10 dex, 15 agi, 20 dex, 25 agi, 20 str, 30 dex, 60 agi, 30 str, 40 dex, 20 vit, 80 agi ,60 dex, 50 str, 90 agi, 70 str, 40 vit
		do conf statsAddAuto_dontUseBonus 1
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list NV_BASIC 9, MC_INCCARRY 10, MC_DISCOUNT 8, MC_OVERCHARGE 10, MC_PUSHCART 10, MC_VENDING 10, MC_IDENTIFY 1, AM_REST 1, AM_CALLHOMUN 1, AM_RESURRECTHOMUN 5, AM_AXEMASTERY 10, AM_LEARNINGPOTION 10, AM_PHARMACY 10, AM_POTIONPITCHER 5, MC_DISCOUNT 10, AM_CANNIBALIZE 5
		do conf itemsMaxWeight 49
		do conf itemsMaxWeight_sellOrStore 48
		do conf itemsMaxNum_sellOrStore 99
		do iconf 12323 0 0 0 #Asa de Mosca de Iniciante
		do iconf 12324 0 0 0 #Asa de Borboleta de Iniciante
		do iconf 569 0 0 0 #Poção de Aprendiz
		do iconf 7059 50 0 0 #Vale-Armazém
		do iconf 7060 50 0 0 #Vale-Teletransporte
		do iconf 13040 0 0 0 #Punhal de Iniciante
		do iconf 1243 0 0 0 #Adaga do Aprendiz
		do iconf 2112 0 0 0 #Vembrassa do Aprendiz
		do iconf 5055 0 0 0 #Chapéu de Ovo do Aprendiz
		do iconf 2414 0 0 0 #Sandálias do Aprendiz
		do iconf 2510 0 0 0 #Capuz do Aprendiz
		do iconf 2352 0 0 0 #Traje do Aprendiz
		do iconf 1201 0 0 0 #Faca
		do iconf 13041 0 0 0 #Main Gauche de Iniciante
		do iconf 2393 0 0 0 #Túnica de Iniciante
		do iconf 2301 0 0 0 #Camisa de Algodão
        do iconf 710 0 0 0	#Flor das Ilusões
		]
		do talk $.NpcNearLastBinId
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte II]															#	
#  										- Entrando no Castelo & Configurando Parâmetros de Bugged  -								#
#																																	#
#####################################################################################################################################

macro GotoInside {
	$nextMap = nextMap("$.map")
	do move $nextMap 101 29
}

automacro moveInside {
	exclusive 1
	QuestActive 7117
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

automacro moveInsideBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

automacro moveInsideBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte III]															#	
#  								- Falando com Sprakki dentro do Castelo & Configurando Parâmetros de Bugged -						#
#																																	#
#####################################################################################################################################

macro GotoSpraki {
	do move 101 29
}

macro SprakiiBuggedTalk {
	do talk $.NpcNearLastBinId
}

automacro moveNextToSprakki {
	exclusive 1
	QuestActive 7117
	NpcNotNear /Sprakki/
	BaseLevel = 1
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro moveNextToSprakkiBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	NpcNotNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro moveNextToSprakkiBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNotNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro talkSprakkiBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call SprakiiBuggedTalk
}

automacro talkSprakkiBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call SprakiiBuggedTalk
}

automacro talkSprakki {
	exclusive 1
	QuestActive 7117
	BaseLevel = 1
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
		do talk resp 0
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte IV]															#	
#  								- Falando com Brade, Equipando os itens necessários & Configurando Parâmetros de Bugged -			#
#																																	#
#####################################################################################################################################

macro MoveToBrade {
	do move 103 105
}

automacro moveNextToBrade1 {
	exclusive 1
	QuestActive 7118
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 2
	call MoveToBrade
}

automacro moveNextToBrade2 {
	exclusive 1
	QuestActive 7119
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 2
	call MoveToBrade

}

automacro talkBrade {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do pconf 5055 0 #Chapéu de Ovo do Aprendiz
		do pconf 2510 0 #Capuz do Aprendiz
		do pconf 2414 0 #Sandálias do Aprendiz
		do pconf 2112 0 #Vembrassa do Aprendiz
		do pconf 1243 0 #Adaga do Aprendiz
		do pconf 2352 0 #Traje do Aprendiz
		do talk $.NpcNearLastBinId
	}
}

automacro moveNextToBradeBugged {
	exclusive 1
	QuestInactive 7118
	QuestInactive 7119
	BaseLevel = 3
	InInventoryID 5055 = 0 #Chapéu de Ovo do Aprendiz
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call MoveToBrade
}

automacro talkBradeBugged {
	exclusive 1
	QuestInactive 7118
	QuestInactive 7119
	BaseLevel = 3
	InInventoryID 5055 = 0 #Chapéu de Ovo do Aprendiz
	NpcNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do pconf 5055 0 #Chapéu de Ovo do Aprendiz
		do pconf 2510 0 #Capuz do Aprendiz
		do pconf 2414 0 #Sandálias do Aprendiz
		do pconf 2112 0 #Vembrassa do Aprendiz
		do pconf 1243 0 #Adaga do Aprendiz
		do pconf 2352 0 #Traje do Aprendiz
		do talk $.NpcNearLastBinId
	}
}

automacro equipStuffForBrade {
	exclusive 1
	QuestActive 7119
	IsNotEquippedID topHead 5055, leftHand 2112, robe 2510, shoes 2414, armor 2352, rightHand 1243
	call {
		do pconf 5055 0 #Chapéu de Ovo do Aprendiz
		do pconf 2510 0 #Capuz do Aprendiz
		do pconf 2414 0 #Sandálias do Aprendiz
		do pconf 2112 0 #Vembrassa do Aprendiz
		do pconf 1243 0 #Adaga do Aprendiz
		do pconf 2352 0 #Traje do Aprendiz
		$check = GetIndexAndEquipped("topHead", 5055) #Chapéu de Ovo do Aprendiz
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("robe", 2510) #Capuz do Aprendiz
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("shoes",2414) #Sandálias do Aprendiz
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor",2352) #Traje do Aprendiz
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("leftHand",2112) #Vembrassa do Aprendiz
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand",1243) #Adaga do Aprendiz
		if ($check != -1) do eq $check
	}
}

automacro talkBradeSecond {
	exclusive 1
	QuestActive 7119
	BaseLevel = 3
	IsEquippedID topHead 5055 #Chapéu de Ovo do Aprendiz
	IsEquippedID leftHand 2112 #Vembrassa do Aprendiz
	IsEquippedID rightHand 1243 #Adaga do Aprendiz
	IsEquippedID robe 2510 #Capuz do Aprendiz
	IsEquippedID armor 2352 #Traje do Aprendiz
	IsEquippedID shoes 2414 #Sandálias do Aprendiz
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
	}
}

automacro BradeBuggedNo7120MoveJinha {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0 #Asa de Borboleta de Iniciante
	IsEquippedID topHead 5055 #Chapéu de Ovo do Aprendiz
	IsEquippedID leftHand 2112 #Vembrassa do Aprendiz
	IsEquippedID rightHand 1243 #Adaga do Aprendiz
	IsEquippedID robe 2510 #Capuz do Aprendiz
	IsEquippedID armor 2352 #Traje do Aprendiz
	IsEquippedID shoes 2414 #Sandálias do Aprendiz
	SkillLevel NV_FIRSTAID = 0 #Primeiros Socorros
	NpcNotNear /Jinha/
	call MoveJinha
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte V]															#	
#  											- Falando com Jinha & Configurando Parâmetros de Bugged -								#
#																																	#
#####################################################################################################################################

macro MoveJinha {
	do move 107 108

}

macro TalkJinha {
	do talk $.NpcNearLastBinId
	do talk resp 0
}

automacro moveToGirlSkill {
	exclusive 1
	QuestActive 7120
	NpcNotNear /Jinha/
	SkillLevel NV_FIRSTAID = 0 #Primeiros Socorros
	priority 0
	call MoveJinha
}

automacro BradeBuggedNo7120TalkJinha {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0 #Asa de Borboleta de Iniciante
	IsEquippedID topHead 5055 #Chapéu de Ovo do Aprendiz
	IsEquippedID leftHand 2112 #Vembrassa do Aprendiz
	IsEquippedID rightHand 1243 #Adaga do Aprendiz
	IsEquippedID robe 2510 #Capuz do Aprendiz
	IsEquippedID armor 2352 #Traje do Aprendiz
	IsEquippedID shoes 2414 #Sandálias do Aprendiz
	SkillLevel NV_FIRSTAID = 0 #Primeiros Socorros
	NpcNear /Jinha/
	call TalkJinha
}

automacro talkGirlSkill {
	exclusive 1
	QuestActive 7120
	NpcNear /Jinha/
	SkillLevel NV_FIRSTAID = 0 #Primeiros Socorros
	priority 0
	call TalkJinha
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte VI]															#	
#  			- Voltando a falar com Brade, Pegando/Equipando a Túnica de Iniciante & Configurando Parâmetros de Bugged -				#
#																																	#
#####################################################################################################################################

macro TalkBradeGetTunic {
	do talk $.NpcNearLastBinId
}

automacro BradeBuggedNo7120MoveBrade {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0 #Asa de Borboleta de Iniciante
	InInventoryID 2393 = 0 #Túnica de Iniciante
	IsEquippedID topHead 5055 #Chapéu de Ovo do Aprendiz
	IsEquippedID leftHand 2112 #Vembrassa do Aprendiz
	IsEquippedID rightHand 1243 #Adaga do Aprendiz
	IsEquippedID robe 2510 #Capuz do Aprendiz
	IsEquippedID armor 2352 #Traje do Aprendiz
	IsEquippedID shoes 2414 #Sandálias do Aprendiz
	SkillLevel NV_FIRSTAID = 1 #Primeiros Socorros
	NpcNotNear /Brade/
	call MoveToBrade
}

automacro BradeBuggedNo7120TalkBrade {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0 #Asa de Borboleta de Iniciante
	InInventoryID 2393 = 0 #Túnica de Iniciante
	IsEquippedID topHead 5055 #Chapéu de Ovo do Aprendiz
	IsEquippedID leftHand 2112 #Vembrassa do Aprendiz
	IsEquippedID rightHand 1243 #Adaga do Aprendiz
	IsEquippedID robe 2510 #Capuz do Aprendiz
	IsEquippedID armor 2352 #Traje do Aprendiz
	IsEquippedID shoes 2414 #Sandálias do Aprendiz
	SkillLevel NV_FIRSTAID = 1 #Primeiros Socorros
	NpcNear /Brade/
	call TalkBradeGetTunic
}

automacro talkBradeThird {
	exclusive 1
	QuestActive 7120
	SkillLevel NV_FIRSTAID = 1 #Primeiros Socorros
	NpcNear /Brade/
	priority 0
	call TalkBradeGetTunic
}

automacro equipStuffForGirl {
	exclusive 1
	QuestInactive 7120
	InInventoryID 2393 = 1 #Túnica de Iniciante
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	IsNotEquippedID armor 2393 #Túnica de Iniciante
	call {
		$check = GetIndexAndEquipped("armor", 2393) #Túnica de Iniciante
		if ($check != -1) {
			do eq $check
		}
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte VII]															#	
#  													- Mudando de mapa & Falando com Choco -											#
#																																	#
#####################################################################################################################################

automacro moveNextToChoco {
	exclusive 1
	IsEquippedID armor 2393 #Túnica de Iniciante
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	NpcNotNear /Choco/
	priority 1
	call {
		do move 32 171
	}
}

automacro talkChoco {
	exclusive 1
	QuestInactive 7120
	QuestInactive 7121
	IsEquippedID armor 2393
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	NpcNear /Choco/
	call {
		do talk $.NpcNearLastBinId
		do conf -f  current_npc kafra
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte VIII]														#	
#  							- Mudando de mapa, Falando com os demais  NPC's & Configurando Parâmetros de Bugged -					#
#																																	#
#####################################################################################################################################

automacro moveNextToGuys {
	exclusive 1
	QuestActive 7121
	NpcNotNear /(Choco|Kafra|Zonda|Soldado)/
	priority 0
	call {
		do move 32 171
	}
}

automacro talkToGuysBugged {
	exclusive 1
	QuestActive 7121
	ConfigKeyNotExist current_npc
	NpcNear /Kafra/
	call {
    	[
    	log ==================================================================================
		log = Há um bug, a config $.ConfigKeyNotExistLastKey já deveria existir nesse ponto	 =
		log = 								Mas ainda não existe							 =
		log = 								   Mudando isso...								 =
		log ==================================================================================
        ]
        do conf -f current_npc kafra
	}
}

automacro talkKafra {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc kafra
	NpcNear /Kafra/
	call {
		do talk $.NpcNearLastBinId
		do talk resp 4
		do conf current_npc zonda
	}
}

automacro talkZonda {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc zonda
	NpcNear /Zonda|Corp/
	call {
		do talk $.NpcNearLastBinId
		do conf current_npc soldado
	}
}

automacro talkSoldado {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc soldado
	NpcNear /Soldado|Guide/
	call {
		do talk $.NpcNearLastBinId
		do conf current_npc choco
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte IX]															#	
#  													- Indo para o Campo de Treinamento! -											#
#																																	#
#####################################################################################################################################

automacro talkChocoAgain {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc choco
	NpcNear /Choco/
	call {
		do talk $.NpcNearLastBinId
		do conf current_npc kafra

	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte X]															#	
#  					- Indo até o Brade, Pegando sua respectiva Quest & Configurando o uso das Poções de Aprendiz -					#
#																																	#
#####################################################################################################################################

macro moveBradeGrounds {
    do mconf 1063 0 0 0 #Lunático
    do mconf 1002 1 0 0 #Poring
    do mconf 1113 0 0 0 #Drops
	call pararDeAtacar
	do move 99 31
}

automacro moveBradeGrounds {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 0 #Punhal de Iniciante
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNotNear /Brade/
	priority 1
	call moveBradeGrounds
}

automacro talkBradeOnGroundsGetQuest {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 0 #Punhal de Iniciante
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do conf route_randomWalk 1
		do conf itemsTakeAuto 2
		$potName = GetNamenyNameID(569)
		do conf useSelf_item_0 $potName
		do conf useSelf_item_0_disabled 0
		do conf useSelf_item_0_hp < 60%
		do conf getAuto_0 $potName
		do conf getAuto_0_minAmount 20
		do conf getAuto_0_maxAmount 200
		do conf getAuto_0_passive 0
		do mconf 1063 0 0 0 #Lunático
		do mconf 1002 1 0 0 #Poring
		do mconf 1113 0 0 0 #Drops
		call voltarAtacar
	}
}

automacro usarPocaoDeApreniz {
	ConfigKeyNot useSelf_item_0 Poção de Aprendiz
	InInventory "Poção de Aprendiz" > 0
	exclusive 1
	call {
		log parece que tenho poção de aprendiz, mas ainda não foi configurado pra ser usado
		log mudando isso
		$potName = GetNamenyNameID(569)
		do conf useSelf_item_0 $potName
		do conf useSelf_item_0_disabled 0
		do conf useSelf_item_0_hp < 60%
		do conf getAuto_0 $potName
		do conf getAuto_0_minAmount 20
		do conf getAuto_0_maxAmount 200
		do conf getAuto_0_passive 0
		log pronto
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte XI]															#	
#  - Indo falar com o Brade após ter terminado a Quest, Recebendo/Equipando os itens ganhos & Configurando Parâmetros de Bugged  -	#
#																																	#
#####################################################################################################################################

automacro moveBradeCompleteQuest {
	exclusive 1
	QuestHuntCompleted 7122 1002
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNotNear /Brade/
	priority 1
	call moveBradeGrounds
}

automacro talkBradeonGroundsCompleteQuest {
	exclusive 1
	QuestHuntCompleted 7122 1002
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do conf -f quest_atual lunaticos
	}
}

automacro equipStuffForBradeGrounds {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 1 #Punhal de Iniciante
	IsNotEquippedID rightHand 13040 #Punhal de Iniciante
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		$check = GetIndexAndEquipped("rightHand", 13040) #Punhal de Iniciante
		if ($check != -1) do eq $check 
	}
}

automacro LastBradeBug {
	NpcMsg /Você ainda está no processo de treinamento/
	exclusive 1
	priority 0
	call {
		[
		log =================================================================
		log = Acabou de ocorrer um bug na sequencia do campo de treinamento =
		log =					Resolvendo isso...						    =
		log =================================================================
		]
		call moveBradeGrounds
		do talk &npc(/Brade/)
		do conf -f quest_atual lunaticos
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte XII]														#
#  												- Desbugando "LockMap None" nos momentos indesejados   -							#
#																																	#
#####################################################################################################################################

automacro lockMap setado quando nao deveria {
	ConfigKeyNot lockMap none
	exclusive 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		do conf lockMap none
		do conf attackAuto_inLockOnly 0
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte XIII]														#
#		  									- Falando com o Treinador para ir a um mapa mais difícil  -								#
#																																	#
#####################################################################################################################################

automacro treinoMaisPesadoMoverPerto {
	QuestActive 7123
	QuestActive 7127
	ConfigKeyNot master RMS Renewal Test Server
	exclusive 1
	NpcNotNear /Treinador/
	InMap new_1-3, new_2-3, new_3-3
	call moverPertoDosNpc
}

automacro treinoMaisPesado {
	QuestActive 7123
	QuestActive 7127
	ConfigKeyNot master RMS Renewal Test Server
	exclusive 1
	NpcNear /Treinador/
	InMap new_1-3, new_2-3, new_3-3
	call {
		log mudando pra mapa onde tem pickys e salgueiros
		do talk $.NpcNearLastBinId #Treinador
		do talk resp 1
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte XIV]															#
#  									- Fazendo a Quest Completa dos Lunáticos & Configurando Parâmetros de Bugged  -					#
#																																	#
#####################################################################################################################################

macro moverPertoDosNpc {
	log indo pra perto dos Npcs
	call pararDeAtacar
	do move &rand(103,105) &rand(36,38)
	pause 1
}

automacro irAteQuestLunatico {
	ConfigKey quest_atual lunaticos
	exclusive 1
	NpcNotNear /Mago|Mage/
	QuestInactive 7124
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call moverPertoDosNpc
}

automacro começarQuestLunaticos {
	ConfigKey quest_atual lunaticos
	exclusive 1
	QuestInactive 7124
	NpcNear /Mago|Mage/
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	run-once 1
	call {
		do talk $.NpcNearLastBinId
		do talk resp 2
	}
}

automacro caçandoLunaticos {
	QuestActive 7124
	exclusive 1
	InMap new_1-3, new_2-3, new_3-3
	run-once 1
	call {
		[
		do mconf 1063 1 0 0 #Lunático
		do mconf 1002 0 0 0 #Poring
		do mconf 1113 0 0 0 #Drops
		]
		call voltarAtacar
		[
		log =========================
		log = Indo matar Lunáticos! =
		log =========================
	}
}

automacro mateiLunaticos {
	exclusive 1
	QuestHuntCompleted 7124 1063
	NpcNear /Mago|Mage/
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		do mconf 1063 0 0 0 #lunatico
		do talk $.NpcNearLastBinId
		do talk resp 2
		do conf -f quest_atual pickys
	}
}

automacro questLunaticoBugged {
	QuestHuntCompleted 7122 1002
	ConfigKey quest_atual lunaticos
	exclusive 1
	call {
		log Acabou de ocorrer um bug na sequencia do campo de treinamento
		log Resolvendo isso
		call moveBradeGrounds
		do talk &npc(/Brade/)
	}
}

automacro mateiLunaticosIndoAteoNpc {
	QuestHuntCompleted 7124 1063
	exclusive 1
	NpcNotNear /Mago|Mage/
	InMap new_1-3, new_2-3, new_3-3
	call moverPertoDosNpc
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte XV]															#
#  									- Fazendo a Quest Completa dos Pickys & Configurando Parâmetros de Bugged  -					#
#																																	#
#####################################################################################################################################

macro sePreparandoPraMatar {
	call voltarAtacar
	do mconf 1113 0 0 0 #Drops
	do mconf 1004 0 0 0 #Zangão
	do mconf 1049 1 0 0 #Picky
	do mconf 1010 1 0 0 #Salgueiro
	[
    log ===================================
    log = Indo matar Pickys e Salgueiros! =
	log ===================================
	]
}

automacro começarQuestPicky {
	ConfigKey quest_atual pickys
	NpcNear /Espadachim|Swordman/
	QuestInactive 7123
	QuestInactive 7124
	exclusive 1
	priority -5
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		[
		log =================================
		log = Indo pegar quest para  Picks! =
		log =================================
		]
		pause 2
		do talk $.NpcNearLastBinId
		do talk resp 2
		do conf -f quest_atual salgueiros
	}
}

automacro ComeçarQuestPickyMoverPerto {
	ConfigKey quest_atual pickys
	NpcNotNear /Espadachim|Swordman/
	QuestInactive 7123
	QuestInactive 7124
	exclusive 1
	priority -5
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call moverPertoDosNpc
}

automacro caçandoPickys {
	QuestHuntOngoing 7123 1049
	InMap new_4-3, new_5-3
	timeout 60
	exclusive 1
	call sePreparandoPraMatar
}

automacro mateiPickys {
	QuestHuntCompleted 7123 1049
	exclusive 1
	InMap new_4-3, new_5-3
	NpcNear /Espadachi|Swordman/i
	call {
		do conf -f quest_atual none
		do mconf 1049 0 0 0 #Picky
		do talk $.NpcNearLastBinId
		do talk resp 2
		call voltarAtacar
	}
}

automacro mateiPickysIndoAteNpc {
	QuestHuntCompleted 7123 1049
	exclusive 1
	InMap new_4-3, new_5-3
	NpcNotNear /Espadachi|Swordman/i
	call moverPertoDosNpc
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										 [Parte XVI]														#
#  								- Fazendo a Quest Completa dos Salgueiros & Configurando Parâmetros de Bugged  -					#
#																																	#
#####################################################################################################################################

automacro começarQuestSalgueiroMoverPerto {
	NpcNotNear /Thief|Gatuno/
	ConfigKey quest_atual salgueiros
	QuestActive 7123
	QuestInactive 7127
	QuestInactive 7124
	priority -5
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call moverPertoDosNpc
}

automacro começarQuestSalgueiro {
	ConfigKey quest_atual salgueiros
	QuestActive 7123
	QuestInactive 7127
	QuestInactive 7124
	NpcNear /Thief|Gatuno/
	priority -5
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		log Indo pegar quest para  Salgueiro
		do talk $.NpcNearLastBinId
		do talk resp 2
		do conf -f quest_atual none
	}
}

automacro caçandoSalgueiro {
	QuestHuntOngoing 7127 1010
	InMap new_4-3, new_5-3
	timeout 60
	exclusive 1
	call sePreparandoPraMatar
}

automacro mateiSalgueiros {
	QuestHuntCompleted 7127 1010
	exclusive 1
	NpcNear /Gatuno|Thief/i
	InMap new_4-3, new_5-3
	call {
		do mconf 1010 0 0 0 #Salgueiro
		do talk $.NpcNearLastBinId
		do talk resp 2
	}
}

automacro mateiSalgueirosIndoAteNpc {
	QuestHuntCompleted 7127 1010
	exclusive 1
	InMap new_4-3, new_5-3
	NpcNotNear /Gatuno|Thief/i
	call moverPertoDosNpc
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte XVII]														#
#  			- Acabei todas as Quest's! Configurando tudo para continuar upando no Campo dos Aprendizer até o nível 12!   -			#
#																																	#
#####################################################################################################################################

automacro completeiTodasAsQuests {
	JobLevel = 10
	BaseLevel < 12
	ConfigKeyNot quest_atual todas_completadas
	QuestInactive 7127
	QuestInactive 7123
	QuestInactive 7124
	exclusive 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		[
		log ======================================================
		log =   Completei todas as Quests, porém ainda não estou =
		log =    preparado para sair do Campo dos Aprendizes...  =
		log = 			 Vou upar aqui até o nível 12!			 =
		log ======================================================
		]
		do conf -f quest_atual todas_completadas
	}
}

automacro continuarUpandoAte12 {
	ConfigKey quest_atual todas_completadas
	QuestInactive 7127
	QuestInactive 7123
	QuestInactive 7124
	InInventoryID 12323 > 50 #Asa de Mosca de Iniciante
	InInventoryID 12324 > 20 #Asa de Borboleta de Iniciante
	BaseLevel < 12
	exclusive 1
	timeout 180
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		[
		do mconf 1004 1 0 0 #Zangão
		do mconf 1007 1 0 0 #Fabre
		do mconf 1049 1 0 0 #Picky
		do mconf 1010 1 0 0 #Salgueiro
		do mconf 1063 1 0 0 #Lunático
		do mconf 1002 1 0 0 #Poring
		do mconf 1113 1 0 0 #Drops
		call voltarAtacar
		log ==========================
		log = Upando até o Nível 12! =
		log ==========================
		]
	}
}

automacro continuar upando ate 12 bugged {
	ConfigKey quest_atual todas_completadas
	QuestActive 7127, 7123, 7124
	BaseLevel < 12
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		[
		log ============================================================================================
		log = 			Deveria upar até o nível 12 agora, mas não completamos uma das quests		   =
		log = 							O número da quest é $.QuestActiveLastID						   =
		log = 										Resolvendo isso...								   =
		log = (Se você estiver vendo essa mensagem mais de uma vez, sua EventMacro pode estar bugada!) =
		log ============================================================================================
		]
		switch ( $.QuestActiveLastID ) {
			case (= 7124) {
				do conf -f quest_atual lunaticos
			}
			case (= 7123) {
				do conf -f quest_atual pickys
			}
			else {
				do conf -f quest_atual salgueiros
			}
		}
	}
}

macro mudarDeMapa {
	do mconf 1063 0 0 0 #Lunático
	call pararDeAtacar
	do move &rand(103,105) &rand(36,38)
	log ======== mudando pra mapa onde tem pickys e salgueiros
	do talk &npc(/Treinador/) #Treinador
	do talk resp 1
	call voltarAtacar
}

automacro seMorrerEnquantoUpaAteLv12 {
	ConfigKey quest_atual todas_completadas
	CurrentHP >= 50%
	IsInCoordinate 95 21
	InMap new_1-3, new_2-3, new_3-3
	exclusive 1
	call mudarDeMapa
}

automacro se morrer enquanto mata pickys_e_salgueiros {
	QuestActive 7123, 7127
	CurrentHP >= 50%
	priority 5
	InMap new_1-3, new_2-3, new_3-3
	exclusive 1
	call mudarDeMapa
}

#####################################################################################################################################
#																																	#
#																[Capítulo I]														#
#														  - Campo dos Aprendizes -													#
#						 										[Parte XVIII]														#
#  		- Falando com o NPC para ir à Guilda dos Mercadores, Definindo Futuras Skills & Configurando Parâmetros de Bugged -			#
#																																	#
#####################################################################################################################################

automacro endlevelingIrAteNpc {
	exclusive 1
	JobLevel 10
	BaseLevel > 11
	QuestInactive 7123
	QuestInactive 7124
	QuestInactive 7127
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	priority 1
	NpcNotNear /Merchant Guide|Mercador/
	call moverPertoDosNpc
}

automacro endleveling {
	exclusive 1
	JobLevel 10
	BaseLevel > 11
	QuestInactive 7123
	QuestInactive 7124
	QuestInactive 7127
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	priority 1
	NpcNear /Merchant Guide|Mercador/
	call {
        do conf -f in_saveMap_sequence false
        do conf -f membroDoEden none
        do conf -f saveMap_storage_sequence none
        do conf -f saveMap_wanted none
        do conf -f saveMap_kafra_position none
        do conf -f saveMap_sellNpc_position none
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 1
		[
		log ==========================
		log = Sinto-me pronto agora! =
		log =  Vou virar Mercador!   =
		log ==========================
		do conf -f quest_atual none
	}
}

automacro virandoMercadorBugged {
	JobLevel = 10
	JobID 0 #Aprendiz
	SkillLevel NV_BASIC != 9
	FreeSkillPoints > 1
	exclusive 1
	call {
		$pontos = $.SkillLevelLastLevel
		[
		log ==================================================
		log = As Habilidades básicas não foram distribuídas! =
		log = 	  A skill está lvl $.SkillLevelLastLevel	 =
		log = 			 Vou distribuir esses pontos		 =
		log ==================================================
		]
		while ($pontos < 9 ) {
		do skills add 1
		$pontos++
		}
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list NV_BASIC 9, MC_INCCARRY 10, MC_DISCOUNT 8, MC_OVERCHARGE 10, MC_PUSHCART 10, MC_VENDING 10, MC_IDENTIFY 1, AM_REST 1, AM_CALLHOMUN 1, AM_RESURRECTHOMUN 5, AM_AXEMASTERY 10, AM_LEARNINGPOTION 10, AM_PHARMACY 10, AM_POTIONPITCHER 5, MC_DISCOUNT 10, AM_CANNIBALIZE 5
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo II]														#
#														  	 - Virando Mercador -													#
#						 										  [Parte I]															#
#  												  - Falando com o NPC para virar Mercador -											#
#																																	#
#####################################################################################################################################

automacro DentroDaGuildaDosMercadores {
	NpcNotNear /Merchant|Mercador/
	InMap alberta_in
	JobID 0 #Aprendiz
	SkillLevel NV_BASIC = 9
	run-once 1
	exclusive 1
	call {
		call pararDeAtacar
		do conf lockMap none
		do move &rand(63,61) &rand(45,43)
	}
}

automacro VirandoMercador {
	InMap alberta_in
	JobID 0 #Aprendiz
	NpcNear /Merchant|Mercador/
	SkillLevel NV_BASIC = 9
	run-once 1
	exclusive 1
	call {
		do talknpc 53 43 c r0 c c c #Merchant|Mercador
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo II]														#
#														  	 - Virando Mercador -													#
#						 										 [Parte II]															#
#  			- Já sou Mercador! Jogando fora o que não presta, Equipando o que presta & Configurando Parâmetros de Bugged -			#
#																																	#
#####################################################################################################################################

automacro JáSouMercador {
	JobIDNot 0 #Aprendiz
	InInventoryID 2414 = 1
	InInventoryID 5055 = 1
	exclusive 1
	call {
		do conf sitAuto_hp_upper 70
		do pconf 1243 0 #Adaga do Aprendiz
		do pconf 2112 0 #Vembrassa do Aprendiz
		do pconf 2414 0 #Sandálias do Aprendiz
		do pconf 2510 0 #Capuz do Aprendiz
		do pconf 2532 0 #Traje do Aprendiz
		do pconf 5055 0 #Chapéu de Ovo do Aprendiz
		do iconf 13041 0 0 0 #Main Gauche de Iniciante
		do iconf 2393 0 0 0 #Túnica de Iniciante
		$check = GetIndexAndEquipped("rightHand", 1243) #Adaga do Aprendiz
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("leftHand", 2112)#Vembrassa do Aprendiz
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("shoes", 2414) #Sandálias do Aprendiz
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("robe", 2510) #Capuz do Aprendiz
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("armor", 2352) #Chapéu de Ovo do Aprendiz
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("topHead", 5055) #Chapéu de Ovo do Aprendiz
		if ($check != -1) do drop $check
	}
}

automacro VireiMercadoEquipandoMachado {
	BaseLevel < 25
	JobID 5 #Mercador
	exclusive 1
	IsNotEquippedID rightHand 1381 #Machado de Batalha de Iniciante
	InInventoryID  13050 = 0 #Adaga Valhalla Iniciante
	InInventoryID 1381 = 1 #Machado de Batalha de Iniciante
	call {
		$check = GetIndexAndEquipped("rightHand", 1381) #Machado de Batalha de Iniciante
		if ($check != -1) do eq $check
	}
}

automacro VireiMercadoEquipandoTúnica {
	IsNotEquippedID armor 2393 #Túnica de Iniciante
	IsNotEquippedID armor 15009 #Uniforme Valhalla Iniciante
	InInventoryID 15009 = 0 #Uniforme Valhalla Iniciante
	BaseLevel < 18
	JobID 5 #Mercador
	InInventoryID 15009 = 0 #Uniforme Valhalla Iniciante
	exclusive 1
	call {
		$check = GetIndexAndEquipped("armor", 2393) #Túnica de Iniciante
		if ($check != -1) do eq $check
	}
}

﻿automacro todobugadão {
	InMapRegex /^(?!new_\d-\d|alberta_in)$/
	JobID 0 #Aprendiz
	exclusive 1
	JobLevel = 10
	timeout 100
	call {
		[
		log ===========================================
		log =        O que está acontecendo?		  =
		log =      Deveria ser Mercador agora,		  =
		log = mas por algum motivo isso não aconteceu =
		log =      está na hora de corrigir isso!	  =
		log ===========================================
		]
		do move alberta_in &rand(63,61) &rand(45,43)
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										   [Parte I]														#
#  											- Registrando-me no Éden & Configurando Parâmetros de Bugged -							#
#																																	#
#####################################################################################################################################

automacro EdenJoinMoveNpc {
	InInventoryID 22508 = 0 #Emblema do Éden#
	IsNotEquippedID armor 15009 #Uniforme Valhalla Iniciante
	InInventoryID 15009 = 0 #Uniforme Valhalla Iniciante
	IsNotEquippedID armor 15010 #Uniforme Valhalla Intermediário
	InInventoryID 15010 = 0 #Uniforme Valhalla Intermediário
	IsNotEquippedID armor 15011 #Uniforme Valhalla Avançado
	InInventoryID 15011 = 0 #Uniforme Valhalla Avançado
	IsNotEquippedID armor 15031 #Armadura do Grupo Éden
	InInventoryID 15031 = 0 #Armadura do Grupo Éden
	ConfigKeyNot membroDoEden sim
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot virarArrauceiro true
	ConfigKeyNot in_saveMap_sequence true
	InInventoryID 2414 = 0 #Sandálias do Aprendiz
	exclusive 1
	run-once 1
	BaseLevel >= 12
	ConfigKeyNot membroDoEden sim
	NpcNotNear /Lenore|Lime/
	JobIDNot 0 #Aprendiz
	call moverPertoDosNpcEden
}

automacro EdenJoinTalkNpc {
	InInventoryID 22508 = 0 #Emblema do Éden#
	IsNotEquippedID armor 15009 #Uniforme Valhalla Iniciante
	InInventoryID 15009 = 0 #Uniforme Valhalla Iniciante
	IsNotEquippedID armor 15010 #Uniforme Valhalla Intermediário
	InInventoryID 15010 = 0 #Uniforme Valhalla Intermediário
	IsNotEquippedID armor 15011 #Uniforme Valhalla Avançado
	InInventoryID 15011 = 0 #Uniforme Valhalla Avançado
	IsNotEquippedID armor 15031 #Armadura do Grupo Éden
	InInventoryID 15031 = 0 #Armadura do Grupo Éden
	ConfigKeyNot membroDoEden sim
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot virarAlquimista true
	ConfigKeyNot in_saveMap_sequence true
	run-once 1
	exclusive 1
	NpcNear /Lenore|Lime/
	call {
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 0
		do talk text lolol
		do talk text lolol
		do talk resp 4
		do iconf 6219 0 0 0 #Emblema do Grupo Valhalla
		do conf -f membroDoEden sim
	}
}

automacro EdenJoinedBugged {
	InInventoryID 22508 = 0 #Emblema do Éden
	ConfigKeyNotExist membroDoEden
	exclusive 1
	run-once 1
	call {
		do conf -f membroDoEden sim
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										  [Parte II]														#
#  									- Trocando o antigo Emblema do Grupo Valhalla pelo atual Emblema do Éden -						#
#																																	#
#####################################################################################################################################

automacro TrocarEmblema_IndoProNpc {
	InInventoryID 6219 = 1 #Emblema do Grupo Valhalla
	NpcNotNear /Lenore|Lime/
	exclusive 1
	priority -2 # um pouco alta
	call  {
		call moverPertoDosNpcEden
		do reload event
	}
}

automacro TrocarEmblema {
	InInventoryID 6219 = 1 #Emblema do Grupo Valhalla
	exclusive 1	
	priority -2 #Um pouco alta
	NpcNear /Lenore|Lime/
	call {
		do talk $.NpcNearLastBinId
		do talk resp 0
		do iconf 22508 0 0 0 #Emblema do Éden (Novo Emblema)
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										  [Parte III]														#
#  															- Quest Éden nível 12 -													#
#																																	#
#####################################################################################################################################

macro moverPertoDosNpcEden { #Serve de parâmetro para as demais Quests do Éden
	do conf lockMap none
	call pararDeAtacar
	[
	log ======================================================================
	log = Estou me movendo para perto dos NPC's #'                           =
	log = do Éden para começar a Quest                                       =
	log ======================================================================
	]
	do move moc_para01 &rand(33,35) &rand(25,27) #Posição ótima no Éden
}

macro caçarMonstros { #Serve de parâmetro para as demais Quests do Éden
	[
	call voltarAtacar
	do mconf $.QuestHuntOngoingLastMobID 2 0 0
	log ========================================
	log = Caçando os monstros da Quest do Éden =
	log ========================================
	]
}

automacro iniciandoQuestEden12MoverPerto {
	NpcNotNear /Boya/
	InInventoryID 22508 =1 #Emblema do Éden
	BaseLevel 12..18
	exclusive 1
	JobID 5 #Mercador
	QuestInactive 7128
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15009 #Uniforme Valhalla Iniciante
	InInventoryID 15009 = 0 #Uniforme Valhalla Iniciante
	call moverPertoDosNpcEden
}

automacro iniciandoQuestEden12 {
	NpcNear /Boya/
	InInventoryID 22508 =1 #Emblema do Éden
	BaseLevel 12..18
	exclusive 1
	JobID 5 #Mercador
	QuestInactive 7128
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15009 #Uniforme Valhalla Iniciante
	InInventoryID 15009 = 0 #Uniforme Valhalla Iniciante
	call {
		[
		log ==========================================
		log = Iniciando a Quest do Éden de nível 12! =
		log ==========================================
		]
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 0
		do talk resp 0
	}
}
automacro Eden12salvarNaKafra {
	QuestActive 7128
	exclusive 1
	BaseLevel 15..25
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap morocc
	call {
		do conf -f quest_eden em_curso
		call SetSaveIn "morocc"
	}
}

automacro Eden12IrNoMapa {
	QuestActive 7128
	exclusive 1
	BaseLevel 15..25
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap morocc
	call {
		[
		log ========================================
		log =Indo fazer a Quest do Éden de nível 12=
		log ========================================
		]
		do conf -f quest_eden em_curso
		log Indo fazer a Quest do Éden de nível 12
		do move moc_fild11 &rand(181,183) &rand(254,256)
		do talk 0 #Cão falante
		do talk resp 1
		do mconf Filhote de Lobo 0 0 0
		do mconf Escorpião 0 0 0
		do mconf Condor 0 0 0
	}
}

automacro Eden12Caçar {
	QuestHuntOngoing 7129 1009, 7130 1107, 7131 1001
	exclusive 1
	timeout 120
	call {
		call caçarMonstros
		if ( &config(lockMap) != moc_fild11) do conf lockMap moc_fild11
	}
}

automacro Eden12FinalizarCaças {
	QuestHuntCompleted 7129 1009, 7130 1107, 7131 1001
	exclusive 1
	call {
		call pararDeAtacar
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		[
		log ==========================================================================
		log = Matei todos os monstros necessários! Vou falar agora com o Cão Falante =
		log ==========================================================================
		]
		do move moc_fild11 &rand(181,183) &rand(254,256)
	  	do talk 0 #Cão Falante
		release Eden12Caçar
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										  [Parte IV]														#
#  															- Quest Éden nível 26 -													#
#																																	#
#####################################################################################################################################

automacro iniciandoQuestEden26MoverPerto {
	NpcNotNear /Boya/
	BaseLevel 26..32
	InInventoryID 22508 =1 #Emblema do Éden
	JobID 5 #Mercador
	exclusive 1
	QuestInactive 7138
	QuestInactive 7139
	QuestInactive 7140
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15010 #Uniforme Valhalla Intermediário
	InInventoryID 15010 = 0 #Uniforme Valhalla Intermediário
	call moverPertoDosNpcEden
}

automacro iniciandoQuestEden26 {
	NpcNear /Boya/
	BaseLevel 26..32
	InInventoryID 22508 =1 #Emblema do Éden
	JobID 5 #Mercador
	exclusive 1
	QuestInactive 7138
	QuestInactive 7139
	QuestInactive 7140
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15010 #Uniforme Valhalla Intermediário
	InInventoryID 15010 = 0 #Uniforme Valhalla Intermediário
	call {
		[
		log =========================================
		log = Iniciando a Quest do Éden de nível 26 =
		log =========================================
		]
		do talk $.NpcNearLastBinId
		do talk resp 1
	}
}

automacro Eden26SalvarNaKafra {
	QuestActive 7138
	BaseLevel >= 26
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap payon
	call {
		do conf -f quest_eden em_curso
		call SetSaveIn "payon"
	}
}

automacro Eden26IrNoMapa {
	QuestActive 7138
	BaseLevel >= 26
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap payon
	call {
		[
		log ==========================================
		log = Indo fazer a Quest do Éden de nível 26 =
		log ==========================================
		]
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 26
		do move pay_arche &rand(44,46) &rand(132,134)
		do talk &npc( 41 136 )
		do mconf Esqueleto 0 0 0
		do mconf Poporing 0 0 0
		do mconf Zumbi 0 0 0
	}
}

automacro Eden26Caçar {
	QuestHuntOngoing 7139 1076, 7140 1031
	exclusive 1
	timeout 180
	call {
		call caçarMonstros
		if ( &config(lockMap) != pay_dun00) do conf lockMap pay_dun00
	}
}

automacro Eden26FinalizarCaças {
	QuestHuntCompleted 7139 1076, 7140 1031
	exclusive 1
	call {
		call pararDeAtacar
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		[
		log ====================================================================
		log = Matei todos os monstros necessários! Vou falar agora com o Coral =
		log ====================================================================
		]
		do move pay_arche &rand(44,46) &rand(132,134)
		do talk &npc( 41 136 ) #Coral
		release Eden26Caçar
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										   [Parte V]														#
#  															- Quest Éden nível 40 -													#
#																																	#
#####################################################################################################################################

automacro IniciandoQuestEden40MoverPerto {
	QuestInactive 7147 #===
	QuestInactive 7148 #
	QuestInactive 7149 # Esse intervalo diz respeito às Quests do Éden
	QuestInactive 7150 #
	QuestInactive 7151 #===
	NpcNotNear /Boya/
	BaseLevel 40..49
	JobID 5 #Mercador
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15011 #Uniforme Valhalla Avançado
	InInventoryID 22508 =1 #Emblema do Éden
	InInventoryID 15011 = 0 #Uniforme Valhalla Avançado
	call moverPertoDosNpcEden
}

automacro IniciandoQuestEden40 {
	QuestInactive 7147 #===
	QuestInactive 7148 #
	QuestInactive 7149 # Esse intervalo diz respeito às Quests do Éden
	QuestInactive 7150 #
	QuestInactive 7151 #===
	NpcNear /Boya/
	BaseLevel 40..49
	InInventoryID 22508 =1 #Emblema do Éden
	JobID 5 #Mercador
	exclusive 1
	QuestInactive 7147
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15011 #Uniforme Valhalla Avançado
	InInventoryID 15011 = 0 #Uniforme Valhalla Avançado
	call {
		[
		log =========================================
		log = Iniciando a Quest do Éden de nível 40 =
		log =========================================
		]
		do talk $.NpcNearLastBinId
		do talk resp 0
	}
}

automacro Eden40SalvarNaKafra {
	QuestActive 7147
	BaseLevel >= 50
	exclusive 1
	ConfigKeyNot virarAlquimista true
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap prontera
	call {
		do conf -f quest_eden em_curso
		call SetSaveIn "prontera"
	}
}

automacro Eden40IrNoMapa {
	QuestActive 7147
	BaseLevel >= 50
	exclusive 1
	ConfigKeyNot virarAlquimista true
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap prontera
	call {
		[
		log ========================================
		log = Indo fazer a Quest do Éden de nível 40 =
		log ========================================
		]
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 40
		do move in_orcs01 &rand(34,36) &rand(162,164)
		do talk 0 #Absalon
		do mconf Guerreiro Orc 0 0 0
		do mconf Filhote de Orc 0 0 0
		do mconf Senhora Orc 0 0 0
	}
}

automacro Eden40Caçar {
	QuestHuntOngoing 7148 1686, 7149 1023, 7150 1273
	exclusive 1
  	timeout 180
	call {
		call caçarMonstros
		if ( &config(lockMap) != gef_fild10) do conf lockMap gef_fild10
	}
}

automacro Eden40FinalizarCaças {
	QuestHuntCompleted 7148 1686, 7149 1023, 7150 1273
	exclusive 1
	call {
		call pararDeAtacar
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		[
		log ======================================================================
		log = Matei todos os monstros necessários! Vou falar agora com o Absalom =
		log ======================================================================
		]
		do move in_orcs01 38 175 &rand(1,4)
		do talk 0 #Absalom
		release Eden40Caçar
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										  [Parte VI]														#
#  															- Quest Éden nível 60 -													#
#																																	#
#####################################################################################################################################

automacro inciandoQuestEden60MoverPerto {
	NpcNotNear /Ur/
	BaseLevel 60..69
	exclusive 1
	InInventoryID 22508 =1 #Emblema do Éden
	JobID 18 #Alquimista
	QuestInactive 7214
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15031 #Armadura do Grupo Éden
	InInventoryID 15031 = 0 #Armadura do Grupo Éden
	call moverPertoDosNpcEden
}

automacro inciandoQuestEden60 {
	NpcNear /Ur/
	BaseLevel 60..69
	exclusive 1
	InInventoryID 22508 =1 #Emblema do Éden
	JobID 18 #Alquimista
	QuestInactive 7214
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15031 #Armadura do Grupo Éden
	InInventoryID 15031 = 0 #Armadura do Grupo Éden
	call {
		[
		log =========================================
		log = Iniciando a Quest do Éden de nível 60 =
		log =========================================
		]
		do talk $.NpcNearLastBinId
		do talk resp 0
		do talk resp 1
	}
}

automacro Eden60SalvarNaKafra {
	QuestActive 7214
	BaseLevel >= 70
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap comodo
	call {
		do conf -f quest_eden em_curso
		call SetSaveIn "comodo"
	}
}

automacro Eden60IrNoMapa {
	QuestActive 7214
	BaseLevel >= 70
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap comodo
	call {
		[
		log ==========================================
		log = Indo fazer a Quest do Éden de nível 60 =
		log ==========================================
		]
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 60
		do move comodo &rand(174,176) &rand(344,346)
		do talk &npc( 173 354 ) #Mémbro do grupo Éden#2n
	}
}

automacro Eden60Caçar {
	QuestHuntOngoing 7215 1278, 7216 1278
	exclusive 1
	timeout 60
	call {
		call caçarMonstros
		if ( &config(lockMap) != beach_dun2) do conf lockMap beach_dun2
	}
}

automacro Eden60_JuntarItens {
	QuestActive 7217
	exclusive 1
	timeout 120
	call {
		do iconf 7196 5 1 0 #Ombreira
		do iconf 7100 7 1 0 #Folha Afiada
		$ombreira = &invamount (Ombreira)
		$folha = &invamount (Folha Afiada)

		if ( $ombreira < 5 ) goto Ombreira
		if ( $ombreira >= 5 && $folha < 7 ) goto Folha
		:Ombreira
		[
		log ==========================================
		log = Coletando Ombreiras para Quest do Éden =
		log ==========================================
		]
		do conf lockMap um_fild02
		call voltarAtacar
		stop

		:Folha
		[
		log =============================================
		log = Coletando Folha Afiada para Quest do Éden =
		log =============================================
		]
		do conf lockMap um_fild01
		call voltarAtacar
		stop
	}
}

automacro Eden60_JaJunteiOsItens {
	InInventoryID 7196 >= 5 #Ombreira
	InInventoryID 7100 >= 7 #Folha Afiada
	QuestActive 7217
    CurrentHP > 80%
	exclusive 1
	call {
		lock Eden60_JuntarItens
		[
		log ===================================
		log = Vamos ao NPC! Já tenho os itens =
		log ===================================
		]
		call pararDeAtacar
		do move um_fild01 &rand(36,38) &rand(277,279)
		do talknpc 34 280 c #Romeo#2nd02
		do iconf 7196 0 0 1 #Ombreira
		do iconf 7100 0 0 1 #Folha Afiada
	}
}

automacro Eden60FinalizarCaças {
	QuestHuntCompleted 7215 1278, 7216 1278
	exclusive 1
	JobID 18 #Alquimista
	call {
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		[
		log ===================================================================================
		log = Matei todos os monstros necessários! Vou falar agora com o Mémbro do grupo Éden =
		log ===================================================================================
		]
		switch ( $.QuestHuntCompletedLastQuestID ) {

			case (= 7215) { #golem1
				do move comodo &rand(174,176) &rand(344,346)
				do talk &npc( 173 354 )
				release Eden60Caçar
			}

			case (= 7216) { #golem2 '
				do move um_fild01 &rand(36,38) &rand(277,279)
				do talk &npc( 34 280 )
				release Eden60Caçar
			}
		}
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										 [Parte VII]														#
#  												- Encerrando as respectivas Quest's do Éden -										#
#																																	#
#####################################################################################################################################

automacro voltarDoMapa {
	QuestActive 7132, 7141, 7151, 7218
	NpcNotNear /Boya|Ur/
	exclusive 1
	call {
		[
		log ===================================================
		log = Matei todos os monstros necessários! Vou voltar = 
		log =      ao Éden para encerrar a minha Quest		  =
		log ===================================================
		]
		call moverPertoDosNpcEden
	}
}

automacro voltarDoMapaDentroDoEden {
	QuestActive 7132, 7141, 7151, 7218
	NpcNear /Boya|Ur/
	exclusive 1
	call {
		#7132 - Quest Éden nivél 12
		#7141 - Quest Éden nivél 26
		#7151 - Quest Éden nivél 40
		#7218 - Quest Éden nivél 60
		[
		log ========================================================
		log = Terminando a Quest do Éden, falando com a/o Boya/Uru =
		log ========================================================
		]
		switch ($.QuestActiveLastID) {

			case (= 7132) { #Quest Éden nível 12
				do talk &npc(/Boya/)
				do mconf Filhote de Lobo 1 0 0
				do mconf Escorpião 1 0 0
				do mconf Condor 1 0 0
				release EdenPegandoEquips12e26e40
			}

			case (= 7141) { #Quest Éden nível 26
				do talk &npc(/Boya/)
				do mconf Esqueleto 1 0 0
				do mconf Poporing 1 0 0
				do mconf Zumbi 1 0 0
				release EdenPegandoEquips12e26e40
			}

			case (= 7151) { #Quest Éden nível 40
				do talk &npc(/Boya/)
				do mconf Guerreiro Orc 1 0 0
				do mconf Filhote de Orc 1 0 0
				do mconf Senhora Orc 1 0 0
				release EdenPegandoEquips12e26e40
			}

			case (= 7218) { #Quest Éden nível 60
				do talk &npc(/Ur/)
			} #'
		}
		do conf -f quest_eden terminando
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										 [Parte VIII]														#
#  							- Pegando os respectivos Equipamentos do Éden & Configurando Parâmetros de Bugged -						#
#																																	#
#####################################################################################################################################

automacro EdenPegandoEquips_IndoProNpc {
	NpcNotNear /hael/i
	ConfigKey quest_eden terminando
	BaseLevel 12..99
	exclusive 1
	call {
		do move moc_para01 48 37 #Portal que antes era Porta
		do move moc_para01 &rand(112,114) &rand(31,33)
	}
}

automacro EdenPegandoEquips12e26e40 {
	ConfigKey quest_eden terminando
	BaseLevel 12..59
	timeout 120
	NpcNear /hael/i
	call {
		[
		log ============================================
		log = Retirando meus equipamentos com o Mihael =
		log ============================================
		]
		do talk $.NpcNearLastBinId
		
		if ( $.lvl >= 40 ) {
			do talk resp 0
			do talk resp 1
			do talk resp /Maça/
			

			do talk $.NpcNearLastBinId
			do talk resp 2
			do talk resp 4
			do talk resp 0
			
		} elsif ( $.lvl >= 26) {
			do talk resp 0
			do talk resp 1
			do talk resp /Maça/
			
		} elsif ( $.lvl >= 12) {
			do talk resp 0
			do talk resp 1
			
		}
		do conf quest_eden none
	}
}

automacro EdenPegandoEquips60 {
	ConfigKey quest_eden terminando
	BaseLevel 60..98
	timeout 120
	IsNotEquippedID armor 15031 #Armadura do Grupo Éden
	NpcNear /Ferreiro|smith/i
	call {
		[
		log =====================================================
		log = Retirando meus equipamentos com o Ferreiro Torhen =
		log =====================================================
		]
        do talk $.NpcNearLastBinId
        do talk resp 2
        do talk resp 1
        do talk resp /Machado/
        do conf quest_eden none
	}
}

automacro EdenPegueiEquips12e26e40 {
	ConfigKey quest_eden terminando
	BaseLevel 12..59
	NpcNear /hael/i
	exclusive 1
	SimpleHookEvent item_gathered
	call {
		do conf -f quest_eden none
	}
}

automacro EdenPegueiEquips60 {
	ConfigKey quest_eden terminando
	BaseLevel 60..98
	exclusive 1
	IsNotEquippedID armor 15031
	NpcNear /Ferreiro|smith/i
	SimpleHookEvent item_gathered
	call {
		do conf -f quest_eden none
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo III]														#
#														  	 	   - Éden -															#
#						 										  [Parte IX]														#
#  													- Equipando os respectivos itens do Éden -										#
#																																	#
#####################################################################################################################################

automacro Eden12Equipando {
	IsNotEquippedID armor 15009 #Uniforme Valhalla Iniciante
	InInventoryID 15009 = 1 #Uniforme Valhalla Iniciante
	BaseLevel 12..25
	exclusive 1
	run-once 1
	call {
		[
		log ====================================
		log = Equipando os itens Éden nivel 12 =
		log ====================================
		]
		$check = GetIndexAndEquipped("robe", 2560) #Capa Valhalla
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("topHead", 5583) #Chapeu valhalla
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("shoes", 2456) #Botas Valhalla Iniciante
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15009) #Uniforme Valhalla Iniciante
		if ($check != -1) do eq $check
	}
}

automacro Eden26Equipando {
	IsNotEquippedID armor 15010 #Uniforme Valhalla Intermediário
	InInventoryID 15010 = 1 #Uniforme Valhalla Intermediário
	BaseLevel 26..49
	exclusive 1
	run-once 1
	call {
		[
		log ====================================
		log = Equipando os itens Éden nivél 26 =
		log ====================================
		]
		$check = GetIndexAndEquipped("shoes", 2457) #Botas Valhalla Intermediárias
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand", 16004) #Maça Valhalla Iniciante
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15010) #Uniforme Valhalla Intermediário
		if ($check != -1) do eq $check
	}
}

automacro Eden40Equipando {
	IsNotEquippedID armor 15011 #Uniforme Valhalla Avançado
	InInventoryID 15011 = 1 #Uniforme Valhalla Avançado
	BaseLevel 40..69
	exclusive 1
	run-once 1
	call {
		[
		log ====================================
		log = Equipando os itens Éden nivél 40 =
		log ====================================
		]
		$check = GetIndexAndEquipped("shoes", 2458) #Botas Valhalla Avançadas
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand", 16005) #Maça Valhalla Intermediária
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15011) #Uniforme Valhalla Avançado
		if ($check != -1) do eq $check
	}
}

automacro Eden60Equipando {
	IsNotEquippedID robe 2571  #Capa II do Grupo Éden
	IsNotEquippedID topHead 18514 #Chapéu II do Grupo Éden
	IsNotEquippedID shoes 2473  #Botas IV do Grupo Éden
	IsNotEquippedID rightHand 1391 #Machado de 2 Mãos I do Éden
	IsNotEquippedID armor 15031 #Armadura do Grupo Éden
	InInventoryID 2571 = 1 #Capa II do Grupo Éden
	InInventoryID 18514 = 1 #Chapéu II do Grupo Éden
	InInventoryID 2473 = 1 #Botas IV do Grupo Éden
	InInventoryID 1391 = 1 #Machado de 2 Mãos I do Éden
	InInventoryID 15031 = 1 #Armadura do Grupo Éden
	BaseLevel 60..98
	exclusive 1
    run-once 1
	call {
		[
		log ====================================
		log = Equipando os itens Éden nivél 60 =
		log ====================================
		]
		$check = GetIndexAndEquipped("robe", 2571) #Capa II do Grupo Éden
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("topHead", 18514) #Chapéu II do Grupo Éden
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("shoes", 2473) #Botas IV do Grupo Éden
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand",1391) #Machado de 2 Mãos I do Éden
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15031) #Armadura do Grupo Éden
		if ($check != -1) do eq $check
	}
}

#####################################################################################################################################
#																																	#
#																[Capítulo IV]														#
#														  	 	    - Up -															#
#						 										  [Parte I]															#
#  							- Configurando para Upar do level 1 ao 99 & Configurando Parâmetros de Bugged  -						#
#																																	#
#####################################################################################################################################

macro configurarMapa {
	if ( &config(saveMap) = $.param[0] ) {
		do conf lockMap $.param[1]
		call voltarAtacar
	} else {
		if (&defined($.param[0])) {
			log cidade pra salvar  é : $.param[0]
		} else {
			log valor de param é $.param[0]
			log por algum motivo a cidade não ta definida... sem isso nao adianta prosseguir
			do reload event
			stop
		}
		$cidade = $.param[0]
		call SetSaveIn "$cidade"
	}
}

macro upar {
	if (&config(lockMap) = $mapa{lockMap}) {
		[
		log ======================
		log =  Tudo Configurado  =
		log = Continuarei upando =
		log ======================
		]
		call voltarAtacar
		stop
	}

	if (&config(saveMap) = $mapa{city}) {
		do conf lockMap $mapa{lockMap}
		call voltarAtacar
	} else {
		call SetSaveIn "$mapa{city}"
	}
}

automacro upAteLv12Aprendiz {
	ConfigKeyNot lockMap pay_fild01
	ConfigKeyNot In_saveMap_sequence true
	JobLevel != 10
	JobID 0
	exclusive 1
	timeout 30
	InMapRegex /^(?!new_\d-\d|moc_prydb1)$/
	call {
		[
		log ================================================================
		log =				Ué?! Ainda sou Aprendiz!?					   =
        log =		E... Não estou no Campo de Treinamento?!			   =
        log = E... Ainda por cima estou no nível de Classe $JobLevelLast?! =
		log =					Resolvendo isso...						   =
		log ================================================================
		]
		call upar
	}
}

automacro definindoVariaveisDeUp {
	timeout 300 #Triggará a cada 5 minutos
	exclusive 1
	BaseLevel < 99
	priority -100 #Maior prioridade de todas
	call {
		switch ($.lvl) {
			case (< 12) {
				$mapa{lockMap} = pay_fild01 #Salgueiro(Nv.8)/Poring(Nv.1)/Fabre(Nv.6)
				$mapa{city} = payon
			}
	    	case (= 12..34) {
				$mapa{lockMap} = pay_fild08 #Esporo(Nv.18)/Rabo de Verme(Nv.17)/Jiboia(Nv.18)
				$mapa{city} = payon
	    	}
	    	case (= 35..50) {
				$mapa{lockMap} = pay_fild07 #Pé Grande(Nv.29)/Caramelo(Nv.2)5/Percevejo(Nv.21)/Creamy(Nv.23)
				$mapa{city} = payon
	    	}
	    	case (= 51..63) {
				$mapa{lockMap} = pay_fild09 #Salgueiro Ancião(Nv.34)/Besouro-Chifre(Nv.32)/Koko(Nv.38)
				$mapa{city} = payon
	    	}
			case (= 64..99) {
				$mapa{lockMap} = moc_fild17 #Hode(Nv.63)/Arenoso(Nv.61)/Frilldora(Nv.57)
				$mapa{city} = morocc
			}
			else {
				[
				log ==========================================================
				log =   	  Erro tentando definir qual mapa upar			 =
				log = Contate os criadores dessa macro (Nipodemos e Oráculo) =
				log ==========================================================
				]
				stop
			}
		}
	}
}

automacro UpClasse1 {
	JobID 1,2,3,4,5,6,24,25  #Classes 1 + Justiceiro e Ninja
	BaseLevel != 99
	ConfigKeyNot lockMap $mapa{lockMap}
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot In_saveMap_sequence true
    ConfigKeyNot fazendoQuestBioetica true
    ConfigKeyNot virarAlquimista true
    ConfigKey questAlquimista none
	JobLevel != 50
	exclusive 1
	priority 20 #Baixa Prioridade
	timeout 30
    call upar
}

automacro upClasse2 {
    JobID 7,8,9,10,11,12,13,14,15,16,17,18,19,20,21 #Classes 2
	BaseLevel != 99
	ConfigKeyNot lockMap $mapa{lockMap}
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot In_saveMap_sequence true
    ConfigKeyNot fazendoQuestBioetica true
    ConfigKeyNot virarAlquimista true
    ConfigKey questAlquimista none
	exclusive 1
	priority 20 #Baixa Prioridade
	timeout 30
    call upar
}

automacro estouLv99 {
	BaseLevel = 99
	exclusive 1
	timeout 120
	JobID 18 #Alquimista
	call {
		[
		log ===========================
		log =  Finalmente peguei 99   =
		log = Isso levou muito tempo! =
		log ===========================
		]
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte I]															#
#  									- Indo à Guilda dos Alquimistas e & Configurando Parâmetros de Bugged -							#
#																																	#
#####################################################################################################################################

automacro virarAlquimistaInicio_IrNoNpc {
    JobID 5 #Mercador
	JobLevel = 50
	FreeSkillPoints = 0
	priority 2
	exclusive 1
    ConfigKeyNot virarAlquimista true
	NpcNotNear /Alquimista sênior/
	call {
		call pararDeAtacar
		do conf lockMap none
		do move alde_alche &rand(25,27) &rand(179,181)
	}
}

automacro virarAlquimistaInicio_Bugged {
	FreeSkillPoints > 0
	timeout 30
	JobLevel = 50
	JobID 5 #Mercador
	exclusive 1
	call {
		[
		log =============================================
		log = Estou pronto para virar Alquimista, porém =
		log =     os pontos não estão distribuídos...   =
		log =            Vamos resolver isso!			=
		log =============================================
		]
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list NV_BASIC 9, MC_INCCARRY 10, MC_DISCOUNT 8, MC_OVERCHARGE 10, MC_PUSHCART 10, MC_VENDING 10, MC_IDENTIFY 1, AM_REST 1, AM_CALLHOMUN 1, AM_RESURRECTHOMUN 5, AM_AXEMASTERY 10, AM_LEARNINGPOTION 10, AM_PHARMACY 10, AM_POTIONPITCHER 5, MC_DISCOUNT 10, AM_CANNIBALIZE 5
		[
		log ================================================================
		log = Se isso estiver aparecendo repetidamente, a macro tem um bug =
		log ================================================================
		]
	}
}

automacro virarAlquimista_noMeioDaQuest_bugged {
	ConfigKeyNot questAlquimista none
	JobLevel = 50
    JobID 5 #Mercador
    ConfigKeyNot virarAlquimista true
    exclusive 1
    call {
 		#essa automacro só se ativará, se a gente ta tiver fazendo a quest
        #mas a config virarAlquimista nao tiver true
        #é essencial que ela esteja true nesse momento, senão
        #a macro de up vai passar por cima e bugar a treta
 		do conf -f virarAlquimista true
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte II]														#
#  														- Falando com o Alquimista Sênior -											#
#																																	#
#####################################################################################################################################

automacro virarAlquimistaInicio {
	JobID 5 #Mercador
	JobLevel = 50
	priority 2
    timeout 30
    ConfigKeyNot virarAlquimista true
	NpcNear /Alquimista sênior/
	call {
		do conf autoTalkCont 1
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 0
		do talk resp 0
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte III]														#
#  											- Identificando os itens necessários para o Alquimista Sênior -							#
#																																	#
#####################################################################################################################################

automacro virarAlquimista_descobrindoQualItem {
	NpcMsg /Como eu te disse, você precisa trazer/
    exclusive 1
    call {
    	do conf -f virarAlquimista true
    	[
        log =*=*=*=*=*=*=*=*=*=*=*=*=*=*==*=*
    	log = A mensagem é: $.NpcMsgLastMsg =
        log =*=*=*=*=*=*=*=*=*=*=*=*=*=*==*=*
        ]
        $mensagemExtraida = extrairMensagem("$.NpcMsgLastMsg")
    	if ( $mensagemExtraida =~ /F.ria Selvagem/) {
        	do conf -f questAlquimista comprarPocao
        } elsif ( $mensagemExtraida =~ /Flecha/ ) {
        	do conf -f questAlquimista comprarFlecha
        } elsif ( $mensagemExtraida =~ /Fornalha/ ) {
        	do conf -f questAlquimista comprarFornalha
        } else {
        	log Erro configurado! Próximo passo, cheque a macro!
        }
    }
}

sub extrairMensagem {
	my ($mensagem) = @_;
    if ($mensagem =~ /trazer (.+) para completar/) {
    	return $1;
    }
    else {
    	warning "ERRO, NÃO FOI POSSIVEL EXTRAIR MENSAGEM\n";
    	return -1;
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte IV]														#
#  											- Comprando os itens necessários para o Alquimista Sênior -								#
#																																	#
#####################################################################################################################################

macro comprarItem {
	### $.param[0] tem como valor a cidade
    ### $.param[1] tem como valor as coordenadas
    ### $.param[2] tem como valor o NPC
    ### $.param[3] tem como valor o item
    ### $.param[4] tem como valor a quantidade
	do move $.param[0] $.param[1] &rand(1,6)
    do talk &npc(/$.param[2]/)
    do store
    do buy &store($.param[3]) $.param[4]
}

automacro virarAlquimista_comprarFornalha {
	exclusive 1
	JobID 5 #Mercador
	JobLevel = 50
	ConfigKey questAlquimista comprarFornalha
    InInventoryID 612 < 100 #Mini-Fornalha
    call {
    	do move geffen
        do move geffen_in 106 178
        do talk &npc(110 172)
        do talk resp 1
        do talk resp 0
        do talk num 100
    }
}

automacro virarAlquimista_comprarFuria {
	exclusive 1
	JobID 5 #Mercador
	JobLevel = 50
	InInventoryID 657 < 7 #Poção da Fúria Selvagem
    ConfigKey questAlquimista comprarPocao
    call comprarItem "cmd_in01" "79 182" "Ferramentas" "Poção da Fúria Selvagem" "7"
}

automacro virarAlquimista_comprarFlechaDeFogo {
	exclusive 1
	JobID 5 #Mercador
	JobLevel = 50
	ConfigKey questAlquimista comprarFlecha
    InInventoryID 1752 <= 500 #Flecha de Fogo
    call comprarItem "alb2trea" "87 65" "Ferramentas" "Flecha de Fogo" "500"
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										   [Parte V]														#
#  											- Entregando os itens necessários para o Alquimista Sênior -							#
#																																	#
#####################################################################################################################################

macro voltarProAlquimistaSenior {
	do move alde_alche &rand(25,27) &rand(178,180)
    do talk &npc (/Alquimista sênior/)
    do conf lockMap none
    pause 3
    
    #isso vai checar se realmente entregamos o item, ja que está sempre suscetivel a falhas
    #se não tiver entregado por qualquer motivo que seja, ele simplesmente vai tentar denovo 
    #Se conseguir, ele move pra o proximo passo
    if ($.InInventoryIDLast = 657) { #Poção da Fúria Selvagem
    	if (&inventory(Poção da Fúria Selvagem) < 7) do conf -f questAlquimista questionario
    } elsif ($.InInventoryIDLast = 612) { #Mini-Fornalha
    	if (&inventory(Mini-Fornalha) < 100) do conf -f questAlquimista questionario
    } elsif ($.InInventoryIDLast = 1752) { #Flecha de Fogo
    	if (&inventory(Flecha de Fogo)  < 500) do conf -f questAlquimista questionario
    }
}	

automacro virarAlquimista_FuriaComprada_indoEntregar {
	InInventoryID 657 >= 7 #Poção da Fúria Selvagem
	ConfigKey questAlquimista comprarPocao
	exclusive 1
    call voltarProAlquimistaSenior
}

automacro virarAlquimsta_FornalhaComprada_indoEntregar {
    InInventoryID 612 >= 100 #Mini-Fornalha
	ConfigKey questAlquimista comprarFornalha
	exclusive 1
    call voltarProAlquimistaSenior
}

automacro virarAlquimista_FlechaComprada_indoEntregar {
    InInventoryID 1752 >= 500 #Flecha de Fogo
	ConfigKey questAlquimista comprarFlecha
	exclusive 1
   	call voltarProAlquimistaSenior
}
	
#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte VI]														#
#  											- Falando com Raspuchin & Configurando Parâmetros de Bugged -							#
#																																	#
#####################################################################################################################################
	
automacro virarAlquistia_npcDoQuestionário {
	ConfigKey questAlquimista questionario
    timeout 60
    call {
    	[
		log ======================================================
		log = 			Como estamos no nível de classe 50,		 =
        log =  não precisamos responder o questionário, somente  =
		log = 				falar com ele! hehehe				 =
		log ======================================================
		]
        do move alde_alche &rand(166,168) &rand(106,108)
        pause 5
		do talk &npc (/Alquimista Misterioso/)
    }
}

automacro virarAlquimista_npcQuestionario_bugged {
	timeout 30
    NpcMsgName /vez que falou comigo/ / Misterioso/
    ConfigKey questAlquimista questionario
    call {
    	do conf -f questAlquimista npcDaFlor
    }
}

automacro virarAlquimista_jaFaleiComNpcQuestionario {
  	exclusive 1
    NpcMsg /Diga a Darcya que eu te mandei/
	ConfigKey questAlquimista questionario
    call {
        do conf -f questAlquimista npcDaFlor
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte VII]														#
#  											- Falando com Darcya & Configurando Parâmetros de Bugged -								#
#																																	#
#####################################################################################################################################

automacro virarAlquimista_NpcDaFlor {
	ConfigKey questAlquimista npcDaFlor
    timeout 30
	call {
		call pararDeAtacar
        do conf lockMap none
        do iconf 710 0 0 0 #Flor das Ilusões
		do move alde_alche &rand(13,16) &rand(18,20)
		do talk &npc(/Pesquisador/)
        do talk resp 0
	}
}

automacro virarAlquimista_faleiComNpcDaFlor_bugged {
	ConfigKey questAlquimista npcDaFlor
	NpcMsgName /Volte quando estiver tudo pronto/ /Pesquisador/
	exclusive 1
	call {
		do conf -f questAlquimista pegarAFlor
	}
}
automacro virarAlquimista_faleiComNpcDaFlor {
	ConfigKey questAlquimista npcDaFlor
    exclusive 1
    NpcMsg /Consiga os itens e volte/
    call {
        do conf -f questAlquimista pegarAFlor
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										 [Parte VIII]														#
#  											- Configurando BetterShopper & Configurando Parâmetros de Bugged -						#
#																																	#
#####################################################################################################################################

automacro virarAlquimista_naoTenhoAFlor {
	ConfigKey questAlquimista pegarAFlor
	ConfigKeyNot questAlquimista fimDaQuest
    exclusive 1
    Zeny >= 150000
    InInventoryID 710 < 1 #Flor das Ilusões
    ConfigKeyNot BetterShopper_on 1
    call {
    	call pararDeAtacar
        do conf lockMap none
        if ( recursoTecnicoPaliativo() = 1) { #Significa que o BetterShopper está ativado
        	do conf lockMap prontera
            do conf route_randomWalk 1
            do conf route_randomWalk_inTown 1
            do conf itemsTakeAuto 1
            do conf itemsGatherAuto 0
            do conf itemsMaxWeight_sellOrStore 40
            
            if (&config(BetterShopper_0) != Flor das Ilusões) {
        		configurarBetterShopper()
                pause 3
                do reload config
            }
        } else {
        	[
        	log =*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=
            log *  		É preciso baixar e ativa o plugin BetterShopper.	  *
            log =  		Até lá nem a macro nem o Openkore vão continuar!	  =
            log * Caso já tenha feito isso, feche e abra o Openkore novamente!*
            log =*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=
            ]
            do eval Misc::offlineMode();
            stop
        }
    }
}

automacro virarAlquimista_naoTenhoAFlor_bugged {
	ConfigKey questAlquimista pegarAFlor
	ConfigKeyNot questAlquimista fimDaQuest
	exclusive 1
	Zeny >= 150000
	InInventoryID 710 < 1 #Flor das Ilusões
	ConfigKey BetterShopper_on 1
	NotInMap prontera
	call {
		do move prontera
		do conf lockMap prontera
	}
}

sub configurarBetterShopper {
	open (my $write, '>>:encoding(UTF-8)', Settings::getControlFilename('config.txt'));
    print $write "BetterShopper_on 1\n";
	print $write "BetterShopper Flor das Ilusões {\n";
	print $write "maxPrice 150000\n";
	print $write "maxAmount 1\n";
	print $write "disabled 0\n";
	print $write "}\n";
    close($fh);
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										 [Parte VIII]														#
#  												- Juntando dinheiro para a Flor caso não tenha -									#
#																																	#
#####################################################################################################################################

automacro virarAlquimista_naoTenhoAFlor_NemZeny {
	ConfigKey questAlquimista pegarAFlor
	ConfigKeyNot questAlquimista fimDaQuest
    exclusive 1
    Zeny < 150000
    InInventoryID 710 < 1 #Flor das Ilusões
    ConfigKeyNot lockMap pay_fild09
    ConfigKeyNot In_saveMap_sequence true
    timeout 120
    call {
    	[
    	log ========================================================
        log =    Não tenho zeny suficiente para comprar a Flor	   =
        log =            Então vou conseguir o dinheiro!		   =	 
        log = Começando o processo de vender loot e conseguir mais =
        log ========================================================
        ]
        do autosell
        do iconf 690 0 0 1 #Lanças de Fogo Nível 3
        do iconf 757 0 0 1 #Minério de Elunium
        do iconf 907 0 0 1 #Resina
        do iconf 947 0 0 1 #Chifre
        do iconf 914 0 0 1 #Felpa
        do iconf 919 0 0 1 #Couro de Animal
        do iconf 943 0 0 1 ##Casca Rija
        do iconf 935 0 0 1 #Casca
        do iconf 1011 0 0 1 #Emveretarcon
        do iconf 2329 0 0 1 #Armadura de Madeira
        do iconf 1026 0 0 1 #Avelã
        do iconf 2502 0 0 1 #Capuz [1]
        do iconf 2402 0 0 1 #Sandálias [1]
        
        call voltarAtacar
        call configurarMapa "payon" "pay_fild09"
    }
}

sub recursoTecnicoPaliativo {
	my $estaNoSys;
    my $controlfile = Settings::getControlFilename('sys.txt');
	open(FILE, '<:encoding(UTF-8)', $controlfile);
	my @lines = <FILE>;
	close(FILE);
	chomp @lines;
    
	foreach my $line (@lines) {
		next if $line =~ /^$/ || $line =~ /^#/;
		if ($line =~ /BetterShopper/ ) {
			$estaNoSys = 1 ;
            last;
		}
	}
    
    if ($estaNoSys == 1 ) {
    	return 1;
    } else {
    	return -1;
    }
}

automacro virarAlquimista_juntandoZeny {
	ConfigKey questAlquimista pegarAFlor
	ConfigKeyNot questAlquimista fimDaQuest
    exclusive 1
    ConfigKey lockMap pay_fild09
    ConfigKey saveMap payon
    timeout 180
    call {
    	[
        log ========================================
        log = Estou coletando items pra fazer zeny =
        log =       Para Quest de Alquimista	   =
        log ========================================
        ]
        if (&config(attackAuto) != 2) call voltarAtacar
        if (&config(itemsTakeAuto) != 2) do conf itemsTakeAuto 2
        if (&config(itemsGatherAuto) != 2) do conf itemsGatherAuto 2
        if (&config(itemsMaxWeight_sellOrStore) != 30) do conf itemsMaxWeight_sellOrStore 30
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte IX]														#
#  									- Consegui a Flor! Indo entregá-la & Configurando Parâmetros de Bugged  -						#
#																																	#
#####################################################################################################################################

automacro virarAlquimista_euTenhoAFlor {
	ConfigKey questAlquimista pegarAFlor
	InInventoryID 710 >= 1 #Flor das Ilusões
    timeout 60
	call {
		do conf -f questAlquimista jaPegueiAFlor
	}
}

automacro virarAlquimista_indoEntregaAFlor {
	ConfigKey questAlquimista jaPegueiAFlor
	timeout 60
	InInventoryID 710 >= 1 #Flor das Ilusões
	call {
		call pararDeAtacar
        do conf lockMap none
        do conf route_randomWalk_inTown 0
        do conf BetterShopper_on none
		do move alde_alche &rand(13,16) &rand(18,20)
		do talk &npc(/Pesquisador/)
        do talk resp 1
    }
}

automacro virarAlquimista_entregueiAFlor {
	ConfigKey questAlquimista jaPegueiAFlor
    exclusive 1
    NpcMsgName /torne-se um Alquimista de verdade/ /Pesquisador/
    priority -5 #alto
    call {
    	pause 1
        do conf -f questAlquimista fimDaQuest
    }
}

automacro virarAlquimista_entregueiAFlor_bugged {
	exclusive 1
    NpcMsgName /de um Alquimista/ /Pesquisador/
    ConfigKey questAlquimista jaPegueiAFlor
    call {
    	do conf -f questAlquimista fimDaQuest
    }
}

automacro virarAlquimista_entregueiAFlor_bugged2 {
	exclusive 1
	ConfigKey questAlquimista jaPegueiAFlor
	InInventoryID 710 < 1 #Flor das Ilusões
    call {
    	#se isso ativar, significa que entregamos a flor
    	do conf -f questAlquimista fimDaQuest
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte X]															#
#  									- Terminando a Quest de Alquimista! Indo falar com o Alquimista Chefe  -						#
#																																	#
#####################################################################################################################################

automacro virarAlquimista_FimDaQuest_FalarComAlquimistaChefe {
	ConfigKey questAlquimista fimDaQuest
    JobLevel = 50
    JobID 5
    exclusive 1
    call {
    	do move alde_alche &rand(99,101) &rand(182,184)
    	do talk &npc(101 184)
    	[
    	log ================================
    	log = Finalmente virei Alquimista! =
		log ================================
    	]
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo V]														#
#														  	- Virando Alquimista -													#
#						 										  [Parte XI]														#
#  											  - Sou Alquimista! Fazendo as alterações necessárias   -								#
#																																	#
#####################################################################################################################################

automacro jaSouAlquimista {
	JobID 18 #Alquimista
	ConfigKey virarAlquimista true
    priority -5
	exclusive 1
	call {
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list AM_REST 1, AM_CALLHOMUN 1, AM_RESURRECTHOMUN 5, AM_AXEMASTERY 10, AM_LEARNINGPOTION 10, AM_PHARMACY 10, AM_POTIONPITCHER 5, MC_DISCOUNT 10, AM_CANNIBALIZE 5
		do conf teleportAuto_MaxDmg 1000
		$check = GetIndexAndEquipped("robe", 2560) #Capa Valhalla
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("topHead", 5583) #Chapeu valhalla
		if ($check != -1) do eq $check
		call pararDeAtacar
        do conf BetterShopper_on 0
        do conf route_randomWalk_inTown 0
		do conf virarAlquimista none
		do conf questAlquimista none
	}
}

#
#                                         ...                                                                                                          
#                                      IBBBBBBBQr                                                                                                      
#                                   :BBBJ.   .rMBBM                                                                                                    
#                                  gBg           iBB7                                                                                                  
#                                 BB               gBq                                                                                                 
#                                BB     .DBBBBBB7   1BP                                                                                                
#                               BB     5BBBBBBBBBB   PB7                                                                                               
#                              YB:    SBBMBBBB7 7BB   BB                                                                                               
#                              BB    .BJ    .BB   BS   BB                                                                                              
#                             SB7    BB       BB  BB   QB                                                                                              
#                             BB     BB        BB qB:  .BI                                                                                             
#                            .BB    :B5        1B rBJ   BB                                                                                             
#                            iBB    rBi         B.:BI   BB                                                                                             
#                            7BB    7B:         B:.Bj   BB                                                                                             
#                            sBB    iB7      iBBB:.Br   BB                                                                                             
#                            UBB    .Bq     MBB7BBqB.   BB                                                                                             
#                            2BB7    BB    BB7   bBB    BB                              .:.         ...                                                
#                            jBBM    BB   MBBB7   :.   rBj       XQMb2.           :L2XIYi.B:     rK577UKj   KQjU2jLr:..                                
#                            rBBB    :Bj  uBBBBB       BB:      vB   BB   Bq17. .BPi.  .7KBr   .Bu..:i.iBd iB:    .:i7Lj1J7                            
#                             BBB:    BBr  7BBBBL      .BBB     B   :BB  MD .QB LB: iBBBBPi    B:  BBBMBB5 gBBBDv.        B                            
#                             BBBB     KBBBRb7           :BBL  rR   BB2  B   BB  Qb rB.        bL  .Br       :XBBB  :BBbsgL                            
#                             rBBBQ                        BBr B:  .BB  bL  .BB  bB  i. uB      BB:   :L:      ris  LBBBBq                             
#                              BBBBB:           .2BBBS   :BBBr B   rBR .B   MBX  1B  :QBBD       LBBBi  BY     vLi  K                                  
#                               BBBBBBKv:...rSBBBBRBBBBbIBYBB  B    BBJR   .BB   LQJ KB   ivi   j.  rBQ  B    :7X   g                                  
#                                qBBBBBdBBBBBR2: .gBBBBBB.1B.  Bg         .BB.   :QZ  Zi77r:B: Zr i:.vi iB.   u7S  .Q                                  
#                                  SBBBb7vYsJ1XgBg: QBBBBBb     Bd.     :BBB      Bb.    :IBBv B.      2BP    5s.  M.                                  
#                                     rPMDb5Yi.      :BBd        iEBBBBBBB.       UBBBBBBBBB2  7RbEbbBBB7     BBBDKK                                   
#                                                                    ..            BBEv.          ...          rBB5                                    
#                 iBBBBEJi.                                                                                                                            
#                 Bb7sbBBBBBBBXi                                                                                                                       
#                BR        .7gBBBBj                                                                                                                    
#               BB              .MBB                                                                                                                   
#              YBi     BBBBg7      BB:                                                                                                                 
#              BB     BBBBBBBBBL    BBi                                                                                                                
#             iBr    .B7 BBBBBBBB.  rBB                                                                                                                
#             BB     gB  BBJEBBBBB   BBZ                                                                                                               
#             BE     BQ LBr   .BBB   uBB                                                                                                               
#            7B.    5B  BB      BB   iBBj                                              v:                                                              
#            BB     BBiIB.    7BB    uBBB                                            :M77M                                                             
#           .Bs     .1BBBBBBBBBY     BBBQ                                           2E  SBY                                                            
#           BB            ::.      .BBBBi                                         :b: iBBi                                                             
#           BZ                    XBBBBB                                         X7  BB2                                                               
#          SB     :br.         7BBBBBBB                                         .B7qBB                                                                 
#          BB     BBBBBB7   .BBBBBBBBQ                                            EB:                                                                  
#         rB.    YBQBBBBBB:  LRBBBBMi          .:i7LU7       r7sui        .:rvY7U     .777i..             .:i7LU7        .::ii.       .irYK7           
#         BB     BB MBBBBBB:    5Br        17iii7i.  B.    jB7   5B    7dbX7:.  EQ   :B7..i7YjJY7r:.  17rii7i.  B     .bRbu7rJBb     PZYi:7BB          
#        .Br     Bi BXUBBBBB     qB       iBU.i:  bBBB    BB  PBL :B  .BR  :IBBBBi   BB7.        :iUS.B1.i:  bBBB    7Br     iBB    iB  :  7BL         
#        EB     vBi7B   7BBB.     BB       BBBBBi BB:    :B: .BDBb 7Q .RD  Bd7:      1BBBBBj   .   7u BBBBB: BB:    :B   s1BBBBJ    B. BBr  DB.        
#        BB:     PBB1    BBM      BB           E5 .b     JB  :s :B: B  uB  B:..K         MKj  EBBBBB      E5 .b     M7 .B r2.       B  L     BB        
#        XBBBb.    iBBBBBB:      JBB           Eb  B.    SM   Q  BB L5 7B:  .iJB         7L:  g. :i       db  B     Bi rB Q        X5   LB    BB       
#         BirBBBs     ::        sBBg           I1u uZ    ZZ:  S7:Bi :E :Q2 :BDI:        :rq   M           Iuj 1d    YB  qBB  .i    B  7BBBB    Bb      
#        BB   qBBBb:         iBBBB.           sMB  BIPK bJg   .r   q:  gR  B .7KXQ:    UrX  .M           JMB  BIPK  Br   YsL7bB: 7g  7B  B  .:RBS     
#          BB:    jBBBBBQqXQBBBBBBj         .Bi::      D  B.d.     ud   MM.  .   .BB    u7.  Di        .Bi::      M.  bD7     7BB B   7Bj QBLvLrMB     
#           bBBB7     .LBBBBBBBBB:          EB   .r1dBBB  iMUBB2LXBP    IbE.:YQBBBB5   :BB: .M         ZB   .r1EBBB     LMBBBBBBD.B:rYYBK  X2vi.       
#             :dBBBBBBMdZBBBBRs.            :BBBBBBBQIi     YgBBB1       BBBBBB5i       BBBBB          :BBBBBBBQ2r                rBML7:               
#                   ..::.                    ::                           .               .:            ::                                             
#                                                                                                                                                      
#                                                                                                                                                      
#
#
#
#                                             .:  .   :7:                               :YU7          :.                                               
#                                            iSrMdbI ri:Db:.                          .J:  JZ rY7 :2Lr.KJ                                              
#                                         7ZDB  .uuBZB.  B7BM.UXK5               i.  dg.    BZ: gBrM: .BB.:IbY                                         
#                                        Pq. JU71E  r.L    :rB7  rBv. r7i       MbBdB2   :. .   ur    ..rBBiiEP.                                       
#                                     iPBq   rb iY           :   .7:BB7.7Q:    IB  QZ  .D2IKiLIirUj       B   BBBBE5EBBBBSUqEBBBIUXXMEYLuqb1vL1bXuI1v: 
#                                .u11dB.:.   7i                     .b   ZMKM JMs      S.  I2.b   1L   .:s:   :RBBBI:.rKBB2::r5BBIi7SBBj7uBBZ7LBBKKBBB 
#                                B7   J       . ....                      71E5Ms       r         .B7 . ::         DBg:   LBE... LBJ...BBi::MBsYPBBQbr  
#                               rb .     .       ...  .                  rM.....:... .            .b. .           JZPBi.. iBM.::.PB7rrjBDJ1gBBBDL.     
#                              .Eg ..::  ..        .....                 :Z...:r7.:. .:..:     .   .              ..MQBi:i:UBUvJYJBd25PBRPRBS:         
#             .v7  i:         iQ:L:i7::. ..                               SBJs5B7j:...:.......                     :jbBbLuJsBQ1SXKBgSKBBSi             
#        LbSrrZi7BQiuM.       Yb. .Br:.   ..                            .bBBgs:7JB:..:.          ..           ...    :BMuIIIQRqK1dBM5L:                
#      :BB .uB   ..  bBsD.  rLXd:.1r:  .:. .....  .                   .1D1rrjbBbrvPKdR.::.                    ....   7BZqdKKBu7USq7                    
#     :B7... .:         vBuI1sQq q:   .::i.   ......                .1bv.     .vRB2i1Bvi.. .           .   ......::7ZBBIJLsBBMR:                       
#    7B7.LujMXrb    rrsrYurrsv.iBBS:.:.:r  ...  ....     .. ..    .1BBBZ5r. .....SBUU7...:....          .. ....  :::BB5ru5bs.:LL7i.                    
#  vui. P:  :. :   .. bE77Bs   .d.1bBr.vQLi..::.   ........  .   7Pui::rjQBb:::::.SBBb7i::. ..   ....   ..... .::.:JDBIu7:      .r117:                 
# YS    dM.            qY  X7  11   K51.dB    :...77  .....   .qBQ7.  ....7BBi:7vv7BDMR7:.  ................. .::. BBs:             :7j7.              
# Bi   :D::.           Z:  gr  .B5vY.i. JI  :i  .:B: :   .. .2RDbMBBK:.:::.:BBsuujLDBbD:... ..:..  .:...  ...:... ru iKMJr:.           rPMr            
# rBsi.iZ7  :.         i: .Mj    QBRLU   dbjBu:i  7MB:     JB2.   .LBBJ:r7L7UBPuSSIgQQ: .:.   .ii...::::.:   :S7LX2    BBEMZXS1L7r:.   :uBK            
#  BE:. :B7  :....          B    I..BX..:i::iSBBL7 .Q.Xj sBBBMj. ...:BBUJU1j1BMXbqKRDRv7I7..:..:::::.::::::::.uBS.     rQLsJj1uYJjEBBr .IBB.           
#  B7:7. Di ......    .  rU2.   .I  .BDdBq.U:..r5i. i77BdL:.:1BBv.irrsBBU5KqSQD5IYEMrrRB.r7iLr::::ri..i:.:.::. b:       ZsL7vriiiiJB2   IQ             
#  .bB7: JZL5:  ...   ...BU     g. . .i::dB7.:...i:.:LBBML....iBBLj21jDBdbbU5B1r75BDSbgMXS...77...rP.:Lr:rii:. 1v ...   SJ77i::::igS  QKbi             
#    B7:L.7j..:.::.:...rbb     D:....... LZ..JMLi.:1SLi:uBB::7rIBMSddSZB277sBB1jsKBq:   ML . Qr::.uBPKY:ir::MKYS. ....  Ssri::...KU. 57 .              
#    .UqB .::7:::::... :B    .g:.::..::...JKjJrBLuBBJ. ..vBQ2KX5BQ5UYjBBJ1U5si::Ju.     LDrrZBbjsKBurB2.XB. BS   . :7:  US:::...S.  I7                 
#       gZ77BB:.. RbSBLQL   :Q:.iiiUb552J7:....IM7:rBB7rj1QBKSIMBDjU1SI7r::...v5r   .... 7uUL .7L:    U1LjbjB   ....    rB..::72.  KL                  
#        :L7.sBXLMB7:.7:   rB:.:::PY     r7jjSBK....JBBXKSBZjP25Yi:..  .....7S7........                    :   ...:...  RBR7Lsi  .Zr                   
#              :.       idYZ  ::.br        db:7Bd75bgBBqqU5BB:        ... iIY:.:::.....                      ....:Ji:.:MB::B:  :Pg.                    
#                       1BBr.:.:2b       ZBLrYXBBBQju7jS. rd        ..  :bBr............ .:. ............  ..     :jbE2:    bsdE:                      
#                      iKiBBBbjBBB.      UbSqSu7:7I:   i7B7           :PQBKbu............ii.    .........                   .B                         
#                     :B.:irbi d:u                .BBj. I:     .    ibBbLqbBb:............ .....  ...                   ..   R:                        
#                    rQ..::.    7Y                gBBBBB.        :jQQXY7v77IBu .........:...... J7.            ....   ..... .B:                        
#                   JX..ir...   vM                BBRBB       :JDQduv7777777UX ........q:     .5B.      ...................rBL                         
#                 ibr :rr::...   B.               7BQB     :ugRbj777777777777R..::....:BBMs7L1Si       ..........: .....:Lbq                           
#               .BBBus:i::... r: .d                7B.   sbbj7iiiiiiirrirrrrrXM.:::...  7q5sr.       ......i7ii:1. . 7I1ui                             
#               sU:RQD:BrL:..Y7B: BB               jr  .BBv::::::::::::::::::bB..:::..         .............rLsM:   LB.                                
#             sZSi.:7XS2Qs.. 7BUvBXBQ             rd.7  YRRP7:.......::::i7LJi  .::i:..       ............     r.  LB                                  
#            72BBJ: sZ: 7.... Y     S.            DRB .   rXU5s277rii777v7i.  qB ..iii::...............::..    Es7BB                                   
#             :BBBPLr.:....:.   7  .:Sr            5d:M .       . ....      7BQQR: ..::iii::.......:ruqgMPJ77sIbBZIIUM                                 
#             BQBBBB id:i  LU  :BsBQBMBJ           .MKBiBIBJjYY7rriiiir7sUQBQv..YMPLi.......::rsSdbqUr.  .iiBBY125 :7b                                 
#            iBRBBBB.BQdQ.MiB: bBBQBMEBL              :U:7      ..:.::i:. .B7 ::::r1PXLdBdbggbX17.          .X:Y     Yu                                
#            :BBQBBBMBBBQgBBBRrBKbS5XqEB                                   .B.:::i:::.SR:                    M....    Q.                               
#             BBBBBQRggZKgXbbRBSUUIJsXdB.                                   ML::::.. 1L                      Sir:..   .R:                              
#             :BBBQMZZdbS25SX5gBRXIj75Bi                                    uZ.::.. Ji                       17ri..     M1                             
#               QBBQZDdbSI5SIXMBBBPEMI                                      iQ.:::.7U                        Prii.:.     UD:                           
#                :5BBBQZb5SSUB. :BBK:                                       ig ... S                         Kiri..:.     .Uj:                         
#                   .LdQBQQQQB                                              7Z .. ri                         BERS: :.. .    .7v:                       
#                         .                                                 7b .. b                         jdB5bBi:r.. .     .1Rj                     
#                                                                           vJ . .Z                        .R:i:isjS1.:. . .  :Bs:                     
#                                                                        YL.B.   LBB.                      QQ.:.:..77.:. .L.XrEgB7                     
#                                                                        YBBBiiBKBrJ.                      b5Pq.5..7i  bv BRQBBDRBB:                   
#                                                                        75..BEs:L U:                      IBBBMBU UMJJSBQBDMdXqPZBB.                  
#                                                                        qI  Ii    uY                      LBDBBBBidBBBMgPqS2125J2PBI                  
#                                                                        Bi:..     iQ                      bBEQQBBBBQRE5S55IbMb5J72B.                  
#                                                                       LP.7:.      B                      .BBBQBBBBMZbK2SIqBBBQdZR:                   
#                                                                      :Q.:7:..     EI                       YQBBBBBRZEdSI2Q  LBK:                     
#                                                                     .Q:.7r:..     .B                         .LbQBBBBBBRBB                           
#                                                                    :b:.i7i.. ..    :Z                              .:ir:.                            
#                                                                   iBZ7:7r:.: .      72                                                               
#                                                                  :BZsZBu::....  . i.:BB                                                              
#                                                                  YX iMLZ.BL.:. . U5BRPDB                                                             
#                                                                 qB .i:.YKZL::. .  KBii iL                                                            
#                                                                :Bu .:::.77 .:..    .    sBY                                                          
#                                                                .BSr S::.......:   :r i DBB:                                                          
#                                                                BBBP:BM5r...7:i.i  2BsBgQQQB.                                                         
#                                                               PBDQBRBBBB7 .B2B7B7 BRBDEPqqBg                                                         
#                                                               jBDBBBBBBBB::BBBBBBZES5S5JUPBb                                                         
#                                                                UBBQBBQRRBBMDXKqPPQBRbIUvvjB:                                                         
#                                                                 :BBBBMMMZZDXS5S5bEBBBbS2YQ1                                                          
#                                                                   rBBBBQdbbPX5S2R  iBBMBBr                                                           
#                                                                     .SBBBBQMEqbKBM   2Pi                                                             
#                                                                        .:7LYJuuU17                                                                   
#
#

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										   [Parte I]														#
#  											  		   - Juntando zenys caso eu não tenha -											#
#																																	#
#####################################################################################################################################

automacro questBioetica_naotenhoZenyNemPraComecar {
	JobID 18 #Alquimista
	NotInMap lighthalzen
	NotInMap lhz_in01
	NotInMap lhz_in02
	NotInMap lhz_in03
	Zeny < 25000
	ConfigKey lockMap pay_fild09
	SkillLevel AM_BIOETHICS != 1
	exclusive 1
	timeout 30
	call {
		[
		log ===============================================
		log = Teríamos que começar a quest bioetica agora =
		log = 	 Mas não temos Zeny suficinte pra isso    =
		log =	        vamos conseguir então!			  =
		log ===============================================
		]
		do autosell
		do iconf 690 0 0 1 #Lanças de Fogo Nível 3
		do iconf 757 0 0 1 #Minério de Elunium
		do iconf 907 0 0 1 #Resina
		do iconf 947 0 0 1 #Chifre
		do iconf 914 0 0 1 #Felpa
		do iconf 919 0 0 1 #Couro de Animal
		do iconf 943 0 0 1 ##Casca Rija
		do iconf 935 0 0 1 #Casca
		do iconf 1011 0 0 1 #Emveretarcon
		do iconf 2329 0 0 1 #Armadura de Madeira
		do iconf 1026 0 0 1 #Avelã
		do iconf 2502 0 0 1 #Capuz [1]
		do iconf 2402 0 0 1 #Sandálias [1]
		do conf -f fazendoQuestBioetica true
		do conf -f passoQuestBioetica começo
		call voltarAtacar
		call configurarMapa "payon" "pay_fild09"
	}
}

automacro questBioetica_juntandoZenyPraComecar {
	ConfigKey fazendoQuestBioetica true
	ConfigKey passoQuestBioetica começo
	exclusive 1
	ConfigKey lockMap pay_fild09
	ConfigKey saveMap payon
	timeout 180
	call {
		[
		log ======================================
		log =Estou coletando itens pra fazer zeny
		log =Para Quest de Bioética		 
		log ======================================
		]
		do conf -f fazendoQuestBioetica true
		do conf -f passoQuestBioetica começo
		if (&config(attackAuto) != 2) call voltarAtacar
		if (&config(itemsTakeAuto) != 2) do conf itemsTakeAuto 2
		if (&config(itemsGatherAuto) != 2) do conf itemsGatherAuto 2
		if (&config(itemsMaxWeight_sellOrStore) != 30) do conf itemsMaxWeight_sellOrStore 30
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										   [Parte II]														#
#  														 - Começando a Quest de Bióetica -											#
#																																	#
#####################################################################################################################################

automacro estouFazendoQuestBioetica {
	ConfigKeyNot fazendoQuestBioetica true #vai ativar se não for true... tem que ser true!
	exclusive 1
	JobID 18 #Alquimista
	SkillLevel AM_BIOETHICS != 1
	call {
		do conf -f fazendoQuestBioetica true
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte III]														#
#  														 	- Indo para Lighthalzen -												#
#																																	#
#####################################################################################################################################

automacro estouFazendoQuestBioetica_masNaoToEmLighthalzen {
	ConfigKey fazendoQuestBioetica true
	ConfigKey passoQuestBioetica none
	JobID 18 #Alquimista
	NotInMap lighthalzen
	NotInMap lhz_in01
	NotInMap lhz_in02
	NotInMap lhz_in03
	exclusive 1
	call {
		do conf -f passoQuestBioetica começo
	}
}

automacro questBioetica_comeco_IndoPraLighthalzen {
	Zeny >= 25000
	CheckOnAI auto,manual
	SkillLevel AM_BIOETHICS != 1
	ConfigKey passoQuestBioetica começo
	NotInMap lighthalzen
	NotInMap lhz_in01
	NotInMap lhz_in02
	NotInMap lhz_in03
	exclusive 1
	timeout 300
	call {
		do conf -f fazendoQuestBioetica true
		call junopra "lighthalzen"
	}
}
  
automacro estouEmLighthalzen {
	JobID 18 #Alquimista
	InMap lighthalzen
	SkillLevel AM_BIOETHICS != 1
	exclusive 1
	ConfigKey passoQuestBioetica começo
	call {
		do conf -f fazendoQuestBioetica true
		do conf -f passoQuestBioetica comprarBigodeEOculos
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte IV]														#
#  													- Comprando Bigode Grisalho e Quatro-Olhos -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_ComprandoQuatro-Olhos {
	JobID 18 #Alquimista
	InMap lighthalzen,lhz_in02
	Zeny >= 20000
	exclusive 1
	ConfigKey passoQuestBioetica comprarBigodeEOculos
	InInventoryID 2243 < 1 #Quatro-Olhos
	IsNotEquippedID midHead 2243 #Quatro-Olhos
	SkillLevel AM_BIOETHICS != 1
	call comprarItem "lhz_in02" "87 213" "ulos" "Quatro-Olhos" "1"
}

automacro questBioetica_ComprandoBigode {
	JobID 18 #Alquimista
	InMap lighthalzen,lhz_in02
	Zeny >= 5000
	exclusive 1
	ConfigKey passoQuestBioetica comprarBigodeEOculos
	InInventoryID 2243 = 1 #só compra o bigode depois de comprar o óculus
	InInventoryID 2241 < 1 #Bigode Grisalho
	IsNotEquippedID lowHead 2241 #Bigode Grisalho
	SkillLevel AM_BIOETHICS != 1
	call comprarItem "lhz_in02" "87 213" "ulos" "Bigode Grisalho" "1"
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										   [Parte V]														#
#  													- Equipando Bigode Grisalho e Quatro-Olhos -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_EquipandoBigodeGrisalhoEQuatro-Olhos {
	exclusive 1
	InInventoryID 2243 > 0 #Quatro-Olhos
	InInventoryID 2241 > 0 #Bigode Grisalho
	ConfigKey passoQuestBioetica comprarBigodeEOculos
	IsNotEquippedID midHead 2243, lowHead 2241 #Quatro-Olhos & Bigode Grisalho
	call {
		$check = GetIndexAndEquipped("midHead", 2243) #Quatro-Olhos
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("lowHead", 2241) #Bigode Grisalho
		if ($check != -1) do eq $check
	}
}

automacro questBioEtica_BigodeEOculosEquipado {
	IsEquippedID midHead 2243 #Quatro-Olhos
	IsEquippedID lowHead 2241 #Bigode Grisalho
	ConfigKey passoQuestBioetica comprarBigodeEOculos
	exclusive 1
	call {
		do conf -f tenhoQueFalarComGuarda sim
		do conf -f passoQuestBioetica falarComKellasus
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										   [Parte VI]														#
#  											- Indo atrás do Guarda da Rekenber & Falando com ele  -									#
#																																	#
#####################################################################################################################################

automacro FalarComGuardaRekenber {
	JobID 18 #Alquimista
	ConfigKey tenhoQueFalarComGuarda sim
	ConfigKey fazendoQuestBioetica true
	ConfigKeyNot passoQuestBioetica none
	IsEquippedID midHead 2243 #Quatro-Olhos
	IsEquippedID lowHead 2241 #Bigode Grisalho
	SkillLevel AM_BIOETHICS != 1
	exclusive 1
	call {
		#essa macro só se ativa dentro da quest bioetica,
		#serve pra conversar com o guarda rekenber
		do move lhz_in01 &rand(34,36) &rand(224,226)
		do talk &npc(/Rekenber/)
	}
}

automacro FalComGuardaRekenber {
	JobID 18 #Alquimista
	ConfigKeyNot passoQuestBioetica none
	ConfigKey fazendoQuestBioetica true
	IsInMapAndCoordinate lhz_in01 37 225
	priority -5 #alta
	exclusive 1
	call {
		do conf -f tenhoQueFalarComGuarda none
		do move 0
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte VII]														#
#  											- Indo atrás de Kellasus & Falando com ele pela primeira vez  -							#
#																																	#
#####################################################################################################################################

automacro guardinhaAleatorioIrritante {
	NpcMsg /\.{7}/
	exclusive 1
	call {
		do talk resp 0
		do reload event
	}
}

automacro questBioetica_FirstKellasus {
	JobID 18 #Alquimista
	timeout 130
	ConfigKeyNot tenhoQueFalarComGuarda sim
	ConfigKey passoQuestBioetica falarComKellasus
	call {
		do move lhz_in01 &rand(222,224) &rand(139,141)
		[
		log =======================
		log vou falar 3 vezes ate ele 
		log me dizer oq eu quero
		log =======================
		]
		do talk &npc (/Kellasus/)
		do talk &npc (/Kellasus/)
		do talk &npc (/Kellasus/)
		do talk &npc (/Kellasus/)
	}
}

automacro questBioetica_irriteiKellasus {
	NpcMsg /algum conselho se você estiver|me recuso a ensinar qualquer coisa/
	ConfigKey passoQuestBioetica falarComKellasus
	exclusive 1
	call {
		do talk resp 0 #Kellasus
		do conf -f passoQuestBioetica Skrajjad
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte VIII]														#
#  													- Indo atrás de Skrajjad & Falando com ele   -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_Skrajjad {
	JobID 18 #Alquimista
	timeout 20
	ConfigKey passoQuestBioetica Skrajjad
	call {
		do move lhz_in01 &rand(223,225) &rand(121,123)
		do talk &npc (/Skrajjad/)
	}
}

automacro questBioetica_jaFaleiComSkrajjad {
	JobID 18 #Alquimista
	exclusive 1
	ConfigKey passoQuestBioetica Skrajjad
	NpcMsgName /espero que encontre as respostas|visite Keshibien/ /Skrajj/
	call {
		do conf -f passoQuestBioetica keshibien
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										   [Parte IX]														#
#  													- Indo atrás de Keshibien & Falando com ele   -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_Keshibien {
	JobID 18 #Alquimista
	timeout 20
	ConfigKey passoQuestBioetica keshibien
	call {
		do move lhz_in01 &rand(203,205) &rand(136,138)
		do talk &npc (/Keshibien/)
	}
}

automacro questBioetica_jaFaleiComKeshibiem {
	ConfigKey passoQuestBioetica keshibien
	exclusive 1
	NpcMsg /ocê ainda tem que convencer Kellasus|em algum lugar onde sirvam/
	call {
		do conf -f passoQuestBioetica broncher
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										   [Parte X]														#
#  													- Indo atrás de Broncher & Falando com ele   -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_Broncher {
	JobID 18 #Alquimista
	timeout 30
	ConfigKey passoQuestBioetica broncher
	call {
		do move lhz_in02 &rand(277,279) &rand(273,275)
		do talk &npc (/Broncher/)
	}
}

automacro questBioetica_jaFaleiComBroncher {
	JobID 18 #Alquimista
	exclusive 1
	ConfigKey passoQuestBioetica broncher
	NpcMsgName /tenho muito no que...|Vai, dá o fora daqui/ /Bronche/
	call {
		do conf -f tenhoQueFalarComGuarda sim
		do conf -f passoQuestBioetica falarComKellasusDenovo
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte XI]														#
#  										- Indo atrás de Kellasus & Falando com ele pela segunda vez   -								#
#																																	#
#####################################################################################################################################

automacro questBioetica_KellasusDenovo {
	JobID 18 #Alquimista
	timeout 30
	ConfigKeyNot tenhoQueFalarComGuarda sim #só ativa depois que ja tiver falado com o guardinha
	ConfigKey passoQuestBioetica falarComKellasusDenovo
	call {
		do move lhz_in01 &rand(222,224) &rand(139,141)
		do talk &npc (/Kellasus/)
		do talk text Vaporizar
		do talk text Embrião
		do talk text Ressurreição\ de\ Homunculus
	}
}

automacro questBioetica_jaFaleiComKellasusDenovo {
	ConfigKey passoQuestBioetica falarComKellasusDenovo
	NpcMsg /surja da existência de|fazer isso de consciência tranquila/
	exclusive 1
	call {
		do conf -f passoQuestBioetica falarComKoring
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte XII]														#
#  													- Indo atrás de Koring & Falando com ele   -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_Koring {
	JobID 18 #Alquimista
	timeout 30
	ConfigKey passoQuestBioetica falarComKoring
	call {
		do move lhz_in03 &rand(105,107) &rand(32,34)
		do talk &npc (/Koring/)
	}
}

automacro questBioetica_jaFaleiComKoring {
	JobID 18 #Alquimista
	exclusive 1
	ConfigKey passoQuestBioetica falarComKoring
	NpcMsgName /papai ainda é o melhor/ /Koring/
	call {
		do conf -f passoQuestBioetica falarComBeninne
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte XIII]														#
#  													- Indo atrás de Beninne & Falando com ela   -									#
#																																	#
#####################################################################################################################################

automacro questBioetica_Beninne {
	JobID 18 #Alquimista
	timeout 20
	ConfigKey passoQuestBioetica falarComBeninne
	call {
		do move lhz_in03 &rand(108,110) &rand(30,32)
		do talk &npc (/Beninne/)
	}
}

automacro questBiotica_Beninne {
	JobID 18 #Alquimista
	exclusive 1
	ConfigKey passoQuestBioetica falarComBeninne
	NpcMsgName /mas ama ainda mais sua família/ /Beninne/
	call {
		do conf -f tenhoQueFalarComGuarda sim
		do conf -f passoQuestBioetica falarComKellasusFinal
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte XIV]														#
#  									- Indo atrás de Kellasus & Falando com ele pela terceira e última vez   -						#
#																																	#
#####################################################################################################################################

automacro questBioetica_ThirdKellasus {
	JobID 18 #Alquimista
	timeout 40
	ConfigKeyNot tenhoQueFalarComGuarda sim 
	SkillLevel AM_BIOETHICS != 1
	ConfigKey passoQuestBioetica falarComKellasusFinal
	macro_delay 2
	call {
		do move lhz_in01 &rand(222,224) &rand(139,141)
		do talk &npc (/Kellasus/)
		do talk &npc (/Kellasus/)
		do talk &npc (/Kellasus/)
		do talk &npc (/Kellasus/)
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VI]														#
#														  		  - Bioética -														#
#						 										  [Parte XV]														#
#  												- Consegui a Habilidade! Indo embora de Lighthalzen     -							#
#																																	#
#####################################################################################################################################

automacro jaTenhoASkill {
	JobID 18 #Alquimista
	SkillLevel AM_BIOETHICS = 1
	ConfigKeyNot passoQuestBioetica none
	exclusive 1
	call {
		do conf -f passoQuestBioetica none
		do conf -f fazendoQuestBioetica none
	}
}

automacro jaTenhoASkill_2 {
	JobID 18 #Alquimista
	SkillLevel AM_BIOETHICS = 1
	ConfigKeyNot fazendoQuestBioetica none
	exclusive 1 
	call {
		do conf -f passoQuestBioetica none
		do conf -f fazendoQuestBioetica none
	}
}

automacro voltandoPraJuno {
	JobID 18 #Alquimista
	SkillLevel AM_BIOETHICS = 1
	InMap lighthalzen, lhz_in01, lhz_in02
	ConfigKey fazendoQuestBioetica none
	ConfigKey passoQuestBioetica none
	exclusive 1
	timeout 300
	call {
    	if (&invamount(Asa de Borboleta) > 0 && &config(saveMap) != $.map) {
        	do respawn
        } else {
           	call lhzpra "yuno"
        }
    }
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VII]														#
#													- Locais de Armazenamento/Compra/Venda -										#
#						 										   [Parte I]														#
#  												- Configurando os locais de armazenamento, compra e venda     -						#
#																																	#
#####################################################################################################################################

macro move_to_near_Kafra {
	log estou indo para a kafra em $saveMap &config(saveMap_kafra_position)
	do move $saveMap &config(saveMap_kafra_position) &random("1","2","3","4","5")
}

macro SetSaveIn {
	call pararDeAtacar
	do conf lockMap none
	do conf -f saveMap_storage_sequence c r1
	switch ($.param[0]) {
		case (=~ /einbroch/i ) {
			do conf -f saveMap_wanted einbroch
			do conf -f saveMap_kafra_position 242 205
			do conf -f saveMap_sellNpc_position einbroch 224 207
		}
		case (=~ /aldebaran/i ) {
			do conf -f saveMap_wanted aldebaran
			do conf -f saveMap_kafra_position 143 119
			do conf -f saveMap_sellNpc_position aldebaran 165 107
		}
		case (=~ /juno|yuno/i ) {
		    do conf -f saveMap_wanted yuno
			do conf -f saveMap_kafra_position 152 187
			do conf -f saveMap_sellNpc_position yuno_in01 25 34
		}
		case (=~ /rachel/i ) {
			do conf -f saveMap_wanted rachel
			do conf -f saveMap_kafra_position 109 138
			do conf -f saveMap_sellNpc_position rachel 65 80
		}
		case (=~ /comodo/i ) {
		    do conf -f saveMap_wanted comodo
			do conf -f saveMap_kafra_position 195 150
			do conf -f saveMap_sellNpc_position cmd_in01 79 182
			do conf buyAuto_0_npc cmd_in01 79 182
		}
		case (=~ /prontera/i ) {
		    do conf -f saveMap_wanted prontera
			do conf -f saveMap_kafra_position 151 29
			do conf -f saveMap_sellNpc_position prontera 113 42
			do conf buyAuto_0_npc prt_in 126 76
		}
		case (=~ /payon/i ) {
			do conf -f saveMap_wanted payon
			do conf -f saveMap_kafra_position 181 104
			do conf -f saveMap_sellNpc_position payon_in01 5 49
			do conf buyAuto_0_npc payon_in01 5 49
		}
		case (=~ /geffen/i ) {
			do conf -f saveMap_wanted geffen
			do conf -f saveMap_kafra_position 120 62
			do conf -f saveMap_sellNpc_position geffen_in 74 144
		}
		case (=~ /morocc|morroc|morooc/i ) {
			do conf -f saveMap_wanted morocc
			do conf -f saveMap_kafra_position 156 97
			do conf -f saveMap_sellNpc_position morocc_in 141 67
			do conf buyAuto_0_npc moc_ruins 114 63
		}
		case (=~ /izlude/i ) {
			do conf -f saveMap_wanted izlude
			do conf -f saveMap_kafra_position 134 88
			do conf -f saveMap_sellNpc_position izlude 105 99
			do conf buyAuto_0_npc izlude_in 115 61
		}
		case ( =~ /veins/i ) {
			do conf -f saveMap_wanted veins
			do conf -f saveMap_kafra_position 207 128
			do conf -f saveMap_sellNpc_position ve_in 243 303
		}
		else {
			log nome da cidade inválido, tente novamente...
			log nome é: $.param[0]
			log Talvez o nome foi escrito errado?
			stop
		}
	}
	[
	log ================================================================
	log = Iniciando seguência de salvamento em &config(saveMap_wanted) =
	log ================================================================
	]
	do conf -f In_saveMap_sequence true
}

automacro set_savemap_variables {
	exclusive 1
	run-once 1
	ConfigKey In_saveMap_sequence true
	priority -4
	call {
		$saveMap = &config(saveMap_wanted)
	}
}

automacro jaToSalvoNessaCidade {
	exclusive 1
	ConfigKey In_saveMap_sequence true
	ConfigKey saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	call {
		[
		log ==========================================================================
		log = Já estou salvo em $saveMap, não preciso fazer a sequência toda de novo =
		log = 			mas, só por precaução, as configurações serão feitas		 =
		log ==========================================================================
		]

		do conf saveMap $saveMap
		do conf storageAuto_npc $saveMap &config(saveMap_kafra_position)
		do conf storageAuto 1
		do conf sellAuto 1
		do conf sellAuto_npc &config(saveMap_sellNpc_position)
		do conf storageAuto_npc_type 3
		do conf storageAuto_npc_steps &config(saveMap_storage_sequence)

		do conf saveMap $saveMap
		do conf saveMap_storage_sequence none
		do conf saveMap_wanted none
		do conf saveMap_kafra_position none
		do conf saveMap_sellNpc_position none
		do conf In_saveMap_sequence false
		release set_savemap_variables
	}
}

automacro movendoPraKafraForaDaCidade {
	exclusive 1
	ConfigKey In_saveMap_sequence true
	ConfigKeyNot saveMap_wanted none
	ConfigKeyNot saveMap $saveMap
	NotInMap $saveMap
	call move_to_near_kafra
}

automacro movendoPraKafraDentroDaCidade {
	exclusive 1
	ConfigKeyNot saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	NpcNotNear /(Kafra Employee|Funcionária Kafra|Corp. Ev. Incríveis)/
	InMap $saveMap
	call move_to_near_kafra
}

automacro FalarComKafra {
	ConfigKey In_saveMap_sequence true
	ConfigKeyNot saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	InMap $saveMap
	NpcNear /(Kafra Employee|Funcionária Kafra|Corp. Ev. Incríveis)/
	delay 2
	timeout 20
	call {
		log ====================================================================================================================
		log = Falando com kafra na posição &config(saveMap_kafra_position) usando a sequência '&config(saveMap_save_sequence)' =
		log ====================================================================================================================
		do talknpc &config(saveMap_kafra_position) c r0
	}
}

automacro SalvoNaKafra {
	exclusive 1
	priority -5
	NpcMsgName /O seu Ponto (de Retorno )?foi salvo|saved here|foi salvo aqui na cidade/ /(Kafra Employee|Funcionária Kafra|Corp)/
	ConfigKeyNot saveMap $saveMap
	ConfigKey In_saveMap_sequence true
	InMap $saveMap
	call {
		[
		do conf saveMap $saveMap
		do conf storageAuto_npc $saveMap &config(saveMap_kafra_position)
		do conf storageAuto 1
		do conf sellAuto 1
		do conf sellAuto_npc &config(saveMap_sellNpc_position)
		do conf storageAuto_npc_type 3
		do conf storageAuto_npc_steps &config(saveMap_storage_sequence)

		do conf saveMap_save_sequence none
		do conf saveMap_storage_sequence none
		do conf saveMap_wanted none
		do conf saveMap_kafra_position none
		do conf saveMap_sellNpc_position none
		do conf In_saveMap_sequence false
		release set_savemap_variables

		log =============================
		log = Salvo em &config(saveMap) =
		log =============================
		]
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo VIII]													#
#																  - Aeroplano -														#
#						 										    [Parte I]														#
#  										- Configurando as rotas de voos & Configurando Parâmetros de Bugged -						#
#																																	#
#####################################################################################################################################

#Digite no console do eventMacro 
#eventMacro junopra --cidade
#Pode ser tambem 
#eventMacro einbrochpra --cidade
#ou
#eventMacro rachelpra --cidade
#se o nome estiver certo, ele vai mover pra cidade desejada

macro junopra {
	log Vamos ir de Juno para $.param[0]
	#Se a cidade for izlude ou rachel , ele pega o aeroplano respectivo
	switch ( $.param[0] ) {
		case (=~ /izlude/i) {
			do conf -f aeroplano1 izlude
			do conf -f aeroplano2 none
		}
		case (=~ /rachel/i){
			do conf -f aeroplano1 rachel
			do conf -f aeroplano2 none
		}
		case (=~ /hugel/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 hugel
		}
		case (=~ /lighthalzen/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 lighthalzen
		}
		case (=~ /einbroch/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 einbroch
		}
		case (=~ /[jy]uno/) {
			log VOCÊ QUER IR DE JUNO PRA JUNO?
			log PORQUE VOCÊ FARIA ISSO?
			stop
		} else {
			[
			log Você digitou um nome inválido, por favor tente novamente
			log Os valores podem ser:
			log izlude , rachel , juno ou yuno
			log hugel , lighthalzen ou einbroch
			log Escreva como quiser, desde que escreva certo
			]
			stop
		}
	}
	$varAeroplano1 = &config(aeroplano1)
	$varAeroplano2 = &config(aeroplano2)
	do conf lockMap none
	do ai manual
	if ($.map = airplane || $.map = airplane_01) {
		log ja estamos no aeroplano, só esperar agora
	} else {
		if ( $.map != yuno ) do move yuno
	}
	log $varAeroplano1, $varAeroplano2
}

macro einbrochpra {
	log Vamos ir de Eibroch para $.param[0]
	#se a cidade for juno hugel ou lighthalzen ele só pega 1 aeroplano
	# se for outra cidade, ele pega os dois aeroplanos
	switch ($.param[0]) {
		case (=~ /izlude/i) {
			do conf -f aeroplano1 izlude
			do conf -f aeroplano2 juno
		}
		case (=~ /rachel/i) {
			do conf -f aeroplano1 rachel
			do conf -f aeroplano2 juno
		}
		case (=~ /hugel/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 hugel
		}
		case (=~ /lighthalzen/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 lighthalzen
		}
		case (=~ /einbroch/i) {
			log VOCÊ QUER IR DE EINBROCH PRA EINBROCH?
			log PORQUE VOCÊ FARIA ISSO?
			stop
		}
		case (=~ /[jy]uno/) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 juno
		}
		else {
			[
			log Você digitou um nome inválido, por favor tente novamente
			log Os valores podem ser izlude , rachel , juno ou yuno ,
			log hugel , lighthalzen ou einbroch
			log pode ser com letra maiuscula ou sem
			]
			stop
		}
	}
	$varAeroplano1 = &config(aeroplano1)
	$varAeroplano2 = &config(aeroplano2)
	do conf lockMap none
	do ai manual
	if ($.map = airplane || $.map = airplane_01) {
		log ja estamos no aeroplano, só esperar agora
	} else {
		do move airplane
	}
	log $varAeroplano1, $varAeroplano2
}

macro rachelpra {
	log Vamos ir de Rachel para $.param[0]
	#se a cidade for izlude ou juno ele só pega 1 aeroplano
	# se for outra cidade, ele pega os dois aeroplanos

	switch ($.param[0]) {
	    case (=~ /izlude/i) {
			do conf -f aeroplano1 izlude
			do conf -f aeroplano2 none
	    }
	    case (=~ /rachel/i) {
			log VOCÊ QUER IR DE RACHEL PRA RACHEL?
			log PORQUE VOCÊ FARIA ISSO?
			stop
	    }
	    case (=~ /hugel/i) {
			do conf -f aeroplano1 juno
			do conf -f aeroplano2 hugel
	    }
		case (=~ /lighthalzen/i) {
			do conf -f aeroplano1 juno
			do conf -f aeroplano2 lighthalzen
		}
		case (=~ /einbroch/i) {
			do conf -f aeroplano1 juno
			do conf -f aeroplano2 einbroch
		}
		case (=~ /[jy]uno/) {
			do conf -f aeroplano1 juno
			do conf -f aeroplano2 none
		}
		else {
			[
			log Você digitou um nome inválido, por favor tente novamente
			log Os valores podem ser izlude , rachel , juno ou yuno ,
			log hugel , lighthalzen ou einbroch
			log pode ser com letra maiuscula ou sem
			]
			stop
		}
	}
	$varAeroplano1 = &config(aeroplano1)
	$varAeroplano2 = &config(aeroplano2)
	do conf lockMap none
	do ai manual
	if ( $.map = airplane || $.map = airplane_01) {
		log ja estamos no aeroplano, só esperar agora
	} else {
		do move ra_fild12 294 208
		do talk resp 0
		log $varAeroplano1, $varAeroplano2
	}
}

macro lhzpra {
	log Vamos ir de lighthalzen para $.param[0]
	#se a cidade for hugel, juno, einbroch  ele só pega 1 aeroplano
	# se for outra cidade, ele pega os dois aeroplanos
	 
	switch ($.param[0]) {
	    case (=~ /izlude/i) {
			do conf -f aeroplano1 izlude
			do conf -f aeroplano2 juno
	    }
	    case (=~ /rachel/i) {
			do conf -f aeroplano1 rachel
			do conf -f aeroplano2 juno
	    }
	    case (=~ /hugel/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 hugel
	    }
		case (=~ /lighthalzen/i) {
			log VOCÊ QUER IR DE lighthalzen PRA lighthalzen?
			log PORQUE VOCÊ FARIA ISSO?
		}
		case (=~ /einbroch/i) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 einbroch
		}
		case (=~ /[jy]uno/) {
			do conf -f aeroplano1 none
			do conf -f aeroplano2 juno
		}
		else {
			[
			log Você digitou um nome inválido, por favor tente novamente
            log Os valores podem ser izlude , rachel , juno ou yuno ,
			log hugel , lighthalzen ou einbroch
			log pode ser com letra maiuscula ou sem
			]
			stop
		}
	}
	$aeroplano1 = &config(aeroplano1)
	$aeroplano2 = &config(aeroplano2)
	if ( $.map = airplane || $.map = airplane_01) {
		log ja estamos no aeroplano, só esperar agora
	} else {
		do move airplane #não lembro onde sai
		log $aeroplano1, $aeroplano2
	}
}

automacro dentroDoAeroplanoBugged {
	InMap airplane, airplane_01
	exclusive 1
	CheckOnAI manual
	ConfigKeyNot lockMap none
	call {
		do conf lockMap none
	}
}

automacro usarAeroplanoBugged {
	CheckOnAI auto #só ta aqui pra eu lembrar que ela só ativa na ai auto
	exclusive 1
	ConfigKeyNot aeroplano1 none, aeroplano2 none
	call {
		#se essa macro se ativar, significa que a AI ta no automático
		#quando deveria estar no manual pra todas as outras macros se ativarem
		#aconteceria se no meio do uso da macro (mover ate la ou dentro do aeroplano)
		#o openkore foss fechado
		do ai manual
		$varAeroplano1 = &config(aeroplano1)
		$varAeroplano2 = &config(aeroplano2)
	}
}

automacro dentroDoAeroplanoInternacional_checagem {
	ConfigKeyNot aeroplano1 none
	InMap airplane_01
	CheckOnAI manual
	timeout 50
	call {
		if (&defined($varAeroplano1) = 0) {
			$varAeroplano1 = &config(aeroplano1)
		}
		log Estamos no aeroplano, aguardando chegada ao destino
	}
}

automacro dentroDoAeroplanoInternacional {
	InMap airplane_01
	CheckOnAI manual
	LocalMsg /Bem-vindo a $varAeroplano1|Welcome to $varAeroplano1/i
	exclusive 1
	call sairDoAeroplano
}

automacro dentroDoAeroplanoDomestico_checagem {
	ConfigKeyNot aeroplano2 none
	InMap airplane
	CheckOnAI manual
	timeout 50
	call {
		if (&defined($varAeroplano2) = 0) {
			$varAeroplano2 = &config(aeroplano2)
		}
		log Estamos no aeroplano, aguardando chegada ao destino
	}
}

automacro dentroDoAeroplanoDomestico {
	InMap airplane
	CheckOnAI manual
	LocalMsg /Bem-vindos a $varAeroplano2|Welcome to $varAeroplano2/i
	exclusive 1
	call sairDoAeroplano
}

macro sairDoAeroplano {
	do move 243 74
}

#Se estivermos na cidade, e o local desejado for essa cidade, ele completa o objetivo
#se estivermos na cidade, mas nao for o objetivo, nada acontece, já que provavelmente
#ele só está se locomovendo pra fazer qualquer outra coisa aleatoria que nao tem nada
# a ver com esse macro
automacro chegueiEmCidade2 {
	InMap $varAeroplano2
	NotInMap yuno
	CheckOnAI manual
	ConfigKey aeroplano2 $varAeroplano2
	exclusive 1
	call objetivoCompleto
}

automacro chegueiEmCidade1 {
	InMap $varAeroplano1
	NotInMap yuno
	CheckOnAI manual
	ConfigKey aeroplano1 $aeroplano 1
	exclusive 1
	call objetivoCompleto
}

automacro chegueiPertoDeRachel {
	InMap ra_fild12
	ConfigKey aeroplano1 rachel
	exclusive 1
	CheckOnAI manual
	call {
		log agora to bem perto de rachel
		log indo pra la
		do move rachel
	}
}
macro objetivoCompleto {
	#Se estivermos na cidade, e o local desejado for essa cidade, ele completa o objetivo
	#E automaticamente salva na cidade, usando a macro SetSaveIn
	log cheguei em $.InMapLast , objetivo completo
	do conf aeroplano2 none
	do conf aeroplano1 none
	do ai on
}

automacro chegueiEmJuno {
	InMap yuno
	CheckOnAI manual
	priority -20 #prioridade alta
	ConfigKeyNot aeroplano1 none, aeroplano2 none
	exclusive 1
	call {
		# é aqui que ocorre a mágica, quando chega em juno
		# ele detecta se precisa pegar outro aeroplano ou não
		# se ele precisar ele vai
		# se não precisar ele vai pra proximo da kafra e completa o objetivo
		log destino para aeroplano1 é: &config(aeroplano1)
		log destino para aeroplano2 é: &config(aeroplano2)
		
		if (&config(aeroplano1) =~ /rachel|izlude/i  ) {
			do move airplane_01
		} elsif ( &config(aeroplano2) =~ /hugel|einbroch|lighthalzen/i ) {
			do move airplane
		} elsif ( &config(aeroplano1) =~  /[yj]uno/i || &config(aeroplano2) =~ /[yj]uno/i ) {
			do move &rand(150, 154) &rand(182, 186)
			call objetivoCompleto
		} else {
			log Falha em descobrir a rota correta, revise o código
		}
	}
}

#####################################################################################################################################
#																																	#
#																 [Capítulo IX]														#
#																  - Área X -														#
#						 										   [Parte I]														#
#  													- Não mexa! Deixe-a sempre no final do Arquivo -								#
#																																	#
#####################################################################################################################################

automacro parandoDePegarPotDeAprendiz {
	InInventoryID 569 < 1
	InStorageID 569 < 1
	ConfigKey getAuto_0 Poção de Aprendiz
	exclusive 1
	call {
		log as poções de aprendiz acabaram, removendo o getAuto
		do conf getAuto_0 none
		do conf sitAuto_hp_upper 95
	}
}

automacro ConfigEstáErrada {
	exclusive 1
	overrideAI 1
	priority -5
	ConfigKeyNot autoTalkCont 1
	call {
		log Tem uma config que está errada
		log A config é $.ConfigKeyNotLastKey
		log O valor que quero é $.ConfigKeyNotLastWantedValue
		log Mas o valor atual é $.ConfigKeyNotLastKeyValue
		log Mudando valor da config $.ConfigKeyNotLastKey de $.ConfigKeyNotLastKeyValue para $.ConfigKeyNotLastWantedValue
		do conf $.ConfigKeyNotLastKey $.ConfigKeyNotLastWantedValue
	}
}

macro pararDeAtacar {
	[
	do conf route_randomWalk 0
	do conf attackAuto 1
	]
}

macro voltarAtacar {
	[
	do conf route_randomWalk 1
	do conf attackAuto 2
	]
}

automacro checarNoInicio {
	BaseLevel > 0
	priority -50 #muito alta
	run-once 1
	exclusive 1
	call {
		#do iconf 502 100 0 0
		$desiredLockMap = &config(desired_lockMap)
		xConfConfiguratedOrNot()
	}
}

sub xConfConfiguratedOrNot {
	use File::Copy;
	$path = "plugins/xconf.pl";
	my $estaNaPasta = 0;
	my $estaNoSys = 0;
	if (-e $path ) {
		$estaNaPasta = 1;
	}
	else {
		message "plugin xconf não foi encontrado, iniciando cópia.\n";
		copy("plugins/needs-review/xconf/trunk/xconf.pl","plugins") or die "Copy failed: $!";
		message "xconf.pl foi copiado para a pasta plugins.\n";
		$estaNaPasta = 0;
	}
	my $controlfile = Settings::getControlFilename('sys.txt');
	open(FILE, '<:encoding(UTF-8)', $controlfile);
	my @lines = <FILE>;
	close(FILE);
	chomp @lines;
	foreach my $line (@lines) {
		next if $line =~ /^$/ || $line =~ /^#/;
		if ($line =~ /xconf/ ) {
			$estaNoSys = 1 ;
		}
	}
	if ( $estaNoSys == 0) {
		foreach my $line (@lines) {
			next if $line =~ /^$/ || $line =~ /^#/;
			if ($line =~ /loadPlugins_list\s(.*)/ ) {
				$line = 'loadPlugins_list '.join (',',$1,"xconf");
			}
		}
		open(WRITE, '>:encoding(UTF-8)', $controlfile);
		print WRITE join ("\n", @lines);
		close(WRITE);
		$estaNoSys = 0;
	}
	unless ($estaNaPasta == 1 && $estaNoSys == 1) {
		message "
		Ativando xConf\n";
		Commands::run("plugin load plugins/xconf.pl");
	}
	else {
		message "Checando algumas coisas...\nTudo certo.\n";
	}
}

sub GetIndexAndEquipped {
	my ($type, $id) = @_;
	my $Item = $char->inventory->getByNameID($id);
	if ($Item eq "" ) {
	message "Erro: ou a ID do item está incorreta, ou você não possui esse equipamento.\n";
	return -1;
	}
	my $EquipIndex = $Item->{binID};
	if (exists $char->{equipment}{$type}) {
		my $equipItem = $char->{equipment}{$type};
		if ($equipItem->{nameID} == $id) {
			message "Erro: Esse equip já está equipado.\n";
			return -1;
		} else {
			return $EquipIndex;
		}
	} else {
		return $EquipIndex;
	}
}


sub GetNamenyNameID {
	my $name = $items_lut{$_[0]};
	return $name;
}

sub nextMap {
	my $map = $_[0];
	if ($map =~ /^new_(\d)-(\d)$/) {
	return "new_".$1."-".($2+1);
	} else {
		return 0;
	}
}
